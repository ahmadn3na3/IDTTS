<div class="dashboard-container">
    <header class="dashboard-header">
        <h1>لوحة القيادة التنفيذية</h1>
        <p class="subtitle">نظرة عامة على المهام حسب الأولوية</p>
    </header>

    <div *ngIf="isLoading" class="loading-state">
        <div class="spinner"></div>
        <p>جاري تحميل البيانات...</p>
    </div>

    <div *ngIf="!isLoading" class="dashboard-grid">
        <!-- High Priority Column -->
        <div class="priority-column high-priority">
            <div class="column-header">
                <div class="header-content">
                    <h2>أولوية عالية</h2>
                    <span class="badge">{{ highPriorityTasks.length }}</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" [style.width.%]="(highPriorityTasks.length / tasks.length) * 100"></div>
                </div>
            </div>
            <div class="task-list">
                <div *ngFor="let task of highPriorityTasks" class="task-card" (click)="viewTaskDetails(task.id)">
                    <div class="task-header">
                        <span class="task-id">#{{ task.id }}</span>
                        <span class="task-status">{{ getArabicStatus(task.status) }}</span>
                    </div>
                    <h3>{{ task.name }}</h3>
                    <p class="task-desc">{{ task.description }}</p>
                    <div class="task-footer">
                        <span class="department">{{ getArabicDepartment(task.currentDepartment) }}</span>
                        <span class="date">{{ task.createdAt | date:'shortDate' }}</span>
                    </div>
                </div>
                <div *ngIf="highPriorityTasks.length === 0" class="empty-state">
                    لا توجد مهام ذات أولوية عالية.
                </div>
            </div>
        </div>

        <!-- Medium Priority Column -->
        <div class="priority-column medium-priority">
            <div class="column-header">
                <div class="header-content">
                    <h2>أولوية متوسطة</h2>
                    <span class="badge">{{ mediumPriorityTasks.length }}</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" [style.width.%]="(mediumPriorityTasks.length / tasks.length) * 100"></div>
                </div>
            </div>
            <div class="task-list">
                <div *ngFor="let task of mediumPriorityTasks" class="task-card" (click)="viewTaskDetails(task.id)">
                    <div class="task-header">
                        <span class="task-id">#{{ task.id }}</span>
                        <span class="task-status">{{ getArabicStatus(task.status) }}</span>
                    </div>
                    <h3>{{ task.name }}</h3>
                    <p class="task-desc">{{ task.description }}</p>
                    <div class="task-footer">
                        <span class="department">{{ getArabicDepartment(task.currentDepartment) }}</span>
                        <span class="date">{{ task.createdAt | date:'shortDate' }}</span>
                    </div>
                </div>
                <div *ngIf="mediumPriorityTasks.length === 0" class="empty-state">
                    لا توجد مهام ذات أولوية متوسطة.
                </div>
            </div>
        </div>

        <!-- Low Priority Column -->
        <div class="priority-column low-priority">
            <div class="column-header">
                <div class="header-content">
                    <h2>أولوية منخفضة</h2>
                    <span class="badge">{{ lowPriorityTasks.length }}</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" [style.width.%]="(lowPriorityTasks.length / tasks.length) * 100"></div>
                </div>
            </div>
            <div class="task-list">
                <div *ngFor="let task of lowPriorityTasks" class="task-card" (click)="viewTaskDetails(task.id)">
                    <div class="task-header">
                        <span class="task-id">#{{ task.id }}</span>
                        <span class="task-status">{{ getArabicStatus(task.status) }}</span>
                    </div>
                    <h3>{{ task.name }}</h3>
                    <p class="task-desc">{{ task.description }}</p>
                    <div class="task-footer">
                        <span class="department">{{ getArabicDepartment(task.currentDepartment) }}</span>
                        <span class="date">{{ task.createdAt | date:'shortDate' }}</span>
                    </div>
                </div>
                <div *ngIf="lowPriorityTasks.length === 0" class="empty-state">
                    لا توجد مهام ذات أولوية منخفضة.
                </div>
            </div>
        </div>
    </div>
</div>