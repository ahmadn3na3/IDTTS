import{A as ut,Aa as xt,B as Gn,Ba as ce,C as bt,Ca as Fi,D as jt,Da as Ni,E as u,Ea as Vt,F as wi,Fa as Ri,G as Bt,Ga as _e,H as D,Ha as Me,I as oe,Ia as Ui,J as Hn,Ja as Li,K as ye,Ka as be,L as xe,La as Ht,M as G,Ma as Wt,N as Ai,Na as ct,O as xi,Oa as dt,P as Wn,Q as y,R as o,S as s,T as ke,W as ue,X as H,Y as N,a as de,b as Ae,ba as an,c as Ei,ca as Ct,d as ki,da as l,e as Di,ea as C,f as Dt,fa as se,g as jn,ga as ln,h as Tt,ha as pe,i as Ti,ia as fe,j as rn,ja as he,k as St,ka as Qe,la as Vi,m as Si,ma as At,n as on,na as Ii,o as Je,oa as Ve,p as vt,pa as Ie,q as Bn,r as Mt,ra as Gt,s as wt,sa as Oi,t as sn,ta as Zn,u as ie,ua as qn,v as re,va as zn,w as Mi,wa as Pi,x as yt,xa as un,ya as Se,z as Lt,za as Oe}from"./chunk-D4FNLVUR.js";var Vr=Object.defineProperty,Ir=Object.defineProperties,Or=Object.getOwnPropertyDescriptors,ji=Object.getOwnPropertySymbols,Pr=Object.prototype.hasOwnProperty,Fr=Object.prototype.propertyIsEnumerable,Yn=(n,t,e)=>t in n?Vr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Bi=(n,t)=>{for(var e in t||(t={}))Pr.call(t,e)&&Yn(n,e,t[e]);if(ji)for(var e of ji(t))Fr.call(t,e)&&Yn(n,e,t[e]);return n},Nr=(n,t)=>Ir(n,Or(t)),F=(n,t,e)=>(Yn(n,typeof t!="symbol"?t+"":t,e),e),qe=globalThis;function Pe(n){return(qe.__Zone_symbol_prefix||"__zone_symbol__")+n}function Rr(){let n=qe.performance;function t(X){n&&n.mark&&n.mark(X)}function e(X,m){n&&n.measure&&n.measure(X,m)}t("Zone");let i=class Kn{constructor(m,d){F(this,"_parent"),F(this,"_name"),F(this,"_properties"),F(this,"_zoneDelegate"),this._parent=m,this._name=d?d.name||"unnamed":"<root>",this._properties=d&&d.properties||{},this._zoneDelegate=new _(this,this._parent&&this._parent._zoneDelegate,d)}static assertZonePatched(){if(qe.Promise!==P.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let m=Kn.current;for(;m.parent;)m=m.parent;return m}static get current(){return x.zone}static get currentTask(){return Ee}static __load_patch(m,d,c=!1){if(P.hasOwnProperty(m)){let A=qe[Pe("forceDuplicateZoneCheck")]===!0;if(!c&&A)throw Error("Already loaded patch: "+m)}else if(!qe["__Zone_disable_"+m]){let A="Zone:"+m;t(A),P[m]=d(qe,Kn,B),e(A,A)}}get parent(){return this._parent}get name(){return this._name}get(m){let d=this.getZoneWith(m);if(d)return d._properties[m]}getZoneWith(m){let d=this;for(;d;){if(d._properties.hasOwnProperty(m))return d;d=d._parent}return null}fork(m){if(!m)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,m)}wrap(m,d){if(typeof m!="function")throw new Error("Expecting function got: "+m);let c=this._zoneDelegate.intercept(this,m,d),A=this;return function(){return A.runGuarded(c,this,arguments,d)}}run(m,d,c,A){x={parent:x,zone:this};try{return this._zoneDelegate.invoke(this,m,d,c,A)}finally{x=x.parent}}runGuarded(m,d=null,c,A){x={parent:x,zone:this};try{try{return this._zoneDelegate.invoke(this,m,d,c,A)}catch(Y){if(this._zoneDelegate.handleError(this,Y))throw Y}}finally{x=x.parent}}runTask(m,d,c){if(m.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(m.zone||me).name+"; Execution: "+this.name+")");let A=m,{type:Y,data:{isPeriodic:Z=!1,isRefreshable:We=!1}={}}=m;if(m.state===w&&(Y===R||Y===le))return;let Ye=m.state!=z;Ye&&A._transitionTo(z,K);let Ke=Ee;Ee=A,x={parent:x,zone:this};try{Y==le&&m.data&&!Z&&!We&&(m.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,A,d,c)}catch(Ue){if(this._zoneDelegate.handleError(this,Ue))throw Ue}}finally{let Ue=m.state;if(Ue!==w&&Ue!==J)if(Y==R||Z||We&&Ue===b)Ye&&A._transitionTo(K,z,b);else{let g=A._zoneDelegates;this._updateTaskCount(A,-1),Ye&&A._transitionTo(w,z,w),We&&(A._zoneDelegates=g)}x=x.parent,Ee=Ke}}scheduleTask(m){if(m.zone&&m.zone!==this){let c=this;for(;c;){if(c===m.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${m.zone.name}`);c=c.parent}}m._transitionTo(b,w);let d=[];m._zoneDelegates=d,m._zone=this;try{m=this._zoneDelegate.scheduleTask(this,m)}catch(c){throw m._transitionTo(J,b,w),this._zoneDelegate.handleError(this,c),c}return m._zoneDelegates===d&&this._updateTaskCount(m,1),m.state==b&&m._transitionTo(K,b),m}scheduleMicroTask(m,d,c,A){return this.scheduleTask(new v(S,m,d,c,A,void 0))}scheduleMacroTask(m,d,c,A,Y){return this.scheduleTask(new v(le,m,d,c,A,Y))}scheduleEventTask(m,d,c,A,Y){return this.scheduleTask(new v(R,m,d,c,A,Y))}cancelTask(m){if(m.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(m.zone||me).name+"; Execution: "+this.name+")");if(!(m.state!==K&&m.state!==z)){m._transitionTo(ne,K,z);try{this._zoneDelegate.cancelTask(this,m)}catch(d){throw m._transitionTo(J,ne),this._zoneDelegate.handleError(this,d),d}return this._updateTaskCount(m,-1),m._transitionTo(w,ne),m.runCount=-1,m}}_updateTaskCount(m,d){let c=m._zoneDelegates;d==-1&&(m._zoneDelegates=null);for(let A=0;A<c.length;A++)c[A]._updateTaskCount(m.type,d)}};F(i,"__symbol__",Pe);let r=i,a={name:"",onHasTask:(X,m,d,c)=>X.hasTask(d,c),onScheduleTask:(X,m,d,c)=>X.scheduleTask(d,c),onInvokeTask:(X,m,d,c,A,Y)=>X.invokeTask(d,c,A,Y),onCancelTask:(X,m,d,c)=>X.cancelTask(d,c)};class _{constructor(m,d,c){F(this,"_zone"),F(this,"_taskCounts",{microTask:0,macroTask:0,eventTask:0}),F(this,"_parentDelegate"),F(this,"_forkDlgt"),F(this,"_forkZS"),F(this,"_forkCurrZone"),F(this,"_interceptDlgt"),F(this,"_interceptZS"),F(this,"_interceptCurrZone"),F(this,"_invokeDlgt"),F(this,"_invokeZS"),F(this,"_invokeCurrZone"),F(this,"_handleErrorDlgt"),F(this,"_handleErrorZS"),F(this,"_handleErrorCurrZone"),F(this,"_scheduleTaskDlgt"),F(this,"_scheduleTaskZS"),F(this,"_scheduleTaskCurrZone"),F(this,"_invokeTaskDlgt"),F(this,"_invokeTaskZS"),F(this,"_invokeTaskCurrZone"),F(this,"_cancelTaskDlgt"),F(this,"_cancelTaskZS"),F(this,"_cancelTaskCurrZone"),F(this,"_hasTaskDlgt"),F(this,"_hasTaskDlgtOwner"),F(this,"_hasTaskZS"),F(this,"_hasTaskCurrZone"),this._zone=m,this._parentDelegate=d,this._forkZS=c&&(c&&c.onFork?c:d._forkZS),this._forkDlgt=c&&(c.onFork?d:d._forkDlgt),this._forkCurrZone=c&&(c.onFork?this._zone:d._forkCurrZone),this._interceptZS=c&&(c.onIntercept?c:d._interceptZS),this._interceptDlgt=c&&(c.onIntercept?d:d._interceptDlgt),this._interceptCurrZone=c&&(c.onIntercept?this._zone:d._interceptCurrZone),this._invokeZS=c&&(c.onInvoke?c:d._invokeZS),this._invokeDlgt=c&&(c.onInvoke?d:d._invokeDlgt),this._invokeCurrZone=c&&(c.onInvoke?this._zone:d._invokeCurrZone),this._handleErrorZS=c&&(c.onHandleError?c:d._handleErrorZS),this._handleErrorDlgt=c&&(c.onHandleError?d:d._handleErrorDlgt),this._handleErrorCurrZone=c&&(c.onHandleError?this._zone:d._handleErrorCurrZone),this._scheduleTaskZS=c&&(c.onScheduleTask?c:d._scheduleTaskZS),this._scheduleTaskDlgt=c&&(c.onScheduleTask?d:d._scheduleTaskDlgt),this._scheduleTaskCurrZone=c&&(c.onScheduleTask?this._zone:d._scheduleTaskCurrZone),this._invokeTaskZS=c&&(c.onInvokeTask?c:d._invokeTaskZS),this._invokeTaskDlgt=c&&(c.onInvokeTask?d:d._invokeTaskDlgt),this._invokeTaskCurrZone=c&&(c.onInvokeTask?this._zone:d._invokeTaskCurrZone),this._cancelTaskZS=c&&(c.onCancelTask?c:d._cancelTaskZS),this._cancelTaskDlgt=c&&(c.onCancelTask?d:d._cancelTaskDlgt),this._cancelTaskCurrZone=c&&(c.onCancelTask?this._zone:d._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let A=c&&c.onHasTask,Y=d&&d._hasTaskZS;(A||Y)&&(this._hasTaskZS=A?c:a,this._hasTaskDlgt=d,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,c.onScheduleTask||(this._scheduleTaskZS=a,this._scheduleTaskDlgt=d,this._scheduleTaskCurrZone=this._zone),c.onInvokeTask||(this._invokeTaskZS=a,this._invokeTaskDlgt=d,this._invokeTaskCurrZone=this._zone),c.onCancelTask||(this._cancelTaskZS=a,this._cancelTaskDlgt=d,this._cancelTaskCurrZone=this._zone))}get zone(){return this._zone}fork(m,d){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,m,d):new r(m,d)}intercept(m,d,c){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,m,d,c):d}invoke(m,d,c,A,Y){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,m,d,c,A,Y):d.apply(c,A)}handleError(m,d){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,m,d):!0}scheduleTask(m,d){let c=d;if(this._scheduleTaskZS)this._hasTaskZS&&c._zoneDelegates.push(this._hasTaskDlgtOwner),c=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,m,d),c||(c=d);else if(d.scheduleFn)d.scheduleFn(d);else if(d.type==S)ae(d);else throw new Error("Task is missing scheduleFn.");return c}invokeTask(m,d,c,A){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,m,d,c,A):d.callback.apply(c,A)}cancelTask(m,d){let c;if(this._cancelTaskZS)c=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,m,d);else{if(!d.cancelFn)throw Error("Task is not cancelable");c=d.cancelFn(d)}return c}hasTask(m,d){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,m,d)}catch(c){this.handleError(m,c)}}_updateTaskCount(m,d){let c=this._taskCounts,A=c[m],Y=c[m]=A+d;if(Y<0)throw new Error("More tasks executed then were scheduled.");if(A==0||Y==0){let Z={microTask:c.microTask>0,macroTask:c.macroTask>0,eventTask:c.eventTask>0,change:m};this.hasTask(this._zone,Z)}}}class v{constructor(m,d,c,A,Y,Z){if(F(this,"type"),F(this,"source"),F(this,"invoke"),F(this,"callback"),F(this,"data"),F(this,"scheduleFn"),F(this,"cancelFn"),F(this,"_zone",null),F(this,"runCount",0),F(this,"_zoneDelegates",null),F(this,"_state","notScheduled"),this.type=m,this.source=d,this.data=A,this.scheduleFn=Y,this.cancelFn=Z,!c)throw new Error("callback is not defined");this.callback=c;let We=this;m===R&&A&&A.useG?this.invoke=v.invokeTask:this.invoke=function(){return v.invokeTask.call(qe,We,this,arguments)}}static invokeTask(m,d,c){m||(m=this),we++;try{return m.runCount++,m.zone.runTask(m,d,c)}finally{we==1&&Te(),we--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(w,b)}_transitionTo(m,d,c){if(this._state===d||this._state===c)this._state=m,m==w&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${m}', expecting state '${d}'${c?" or '"+c+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let E=Pe("setTimeout"),V=Pe("Promise"),T=Pe("then"),O=[],W=!1,q;function Ce(X){if(q||qe[V]&&(q=qe[V].resolve(0)),q){let m=q[T];m||(m=q.then),m.call(q,X)}else qe[E](X,0)}function ae(X){we===0&&O.length===0&&Ce(Te),X&&O.push(X)}function Te(){if(!W){for(W=!0;O.length;){let X=O;O=[];for(let m=0;m<X.length;m++){let d=X[m];try{d.zone.runTask(d,null,null)}catch(c){B.onUnhandledError(c)}}}B.microtaskDrainDone(),W=!1}}let me={name:"NO ZONE"},w="notScheduled",b="scheduling",K="scheduled",z="running",ne="canceling",J="unknown",S="microTask",le="macroTask",R="eventTask",P={},B={symbol:Pe,currentZoneFrame:()=>x,onUnhandledError:Q,microtaskDrainDone:Q,scheduleMicroTask:ae,showUncaughtError:()=>!r[Pe("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:Q,patchMethod:()=>Q,bindArguments:()=>[],patchThen:()=>Q,patchMacroTask:()=>Q,patchEventPrototype:()=>Q,getGlobalObjects:()=>{},ObjectDefineProperty:()=>Q,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>Q,wrapWithCurrentZone:()=>Q,filterProperties:()=>[],attachOriginToPatched:()=>Q,_redefineProperty:()=>Q,patchCallbacks:()=>Q,nativeScheduleMicroTask:Ce},x={parent:null,zone:new r(null,null)},Ee=null,we=0;function Q(){}return e("Zone","Zone"),r}function Ur(){var n;let t=globalThis,e=t[Pe("forceDuplicateZoneCheck")]===!0;if(t.Zone&&(e||typeof t.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return(n=t.Zone)!=null||(t.Zone=Rr()),t.Zone}var qt=Object.getOwnPropertyDescriptor,Qn=Object.defineProperty,ei=Object.getPrototypeOf,Lr=Object.create,jr=Array.prototype.slice,ti="addEventListener",ni="removeEventListener",$n=Pe(ti),Xn=Pe(ni),et="true",tt="false",zt=Pe("");function ii(n,t){return Zone.current.wrap(n,t)}function ri(n,t,e,i,r){return Zone.current.scheduleMacroTask(n,t,e,i,r)}var $=Pe,mn=typeof window<"u",pn=mn?window:void 0,ge=mn&&pn||globalThis,Br="removeAttribute";function oi(n,t){for(let e=n.length-1;e>=0;e--)typeof n[e]=="function"&&(n[e]=ii(n[e],t+"_"+e));return n}function Gr(n,t){let e=n.constructor.name;for(let i=0;i<t.length;i++){let r=t[i],a=n[r];if(a){let _=qt(n,r);if(!zi(_))continue;n[r]=(v=>{let E=function(){return v.apply(this,oi(arguments,e+"."+r))};return it(E,v),E})(a)}}}function zi(n){return n?n.writable===!1?!1:!(typeof n.get=="function"&&typeof n.set>"u"):!0}var $i=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,fn=!("nw"in ge)&&typeof ge.process<"u"&&ge.process.toString()==="[object process]",si=!fn&&!$i&&!!(mn&&pn.HTMLElement),Xi=typeof ge.process<"u"&&ge.process.toString()==="[object process]"&&!$i&&!!(mn&&pn.HTMLElement),dn={},Hr=$("enable_beforeunload"),Gi=function(n){if(n=n||ge.event,!n)return;let t=dn[n.type];t||(t=dn[n.type]=$("ON_PROPERTY"+n.type));let e=this||n.target||ge,i=e[t],r;if(si&&e===pn&&n.type==="error"){let a=n;r=i&&i.call(this,a.message,a.filename,a.lineno,a.colno,a.error),r===!0&&n.preventDefault()}else r=i&&i.apply(this,arguments),n.type==="beforeunload"&&ge[Hr]&&typeof r=="string"?n.returnValue=r:r!=null&&!r&&n.preventDefault();return r};function Hi(n,t,e){let i=qt(n,t);if(!i&&e&&qt(e,t)&&(i={enumerable:!0,configurable:!0}),!i||!i.configurable)return;let r=$("on"+t+"patched");if(n.hasOwnProperty(r)&&n[r])return;delete i.writable,delete i.value;let a=i.get,_=i.set,v=t.slice(2),E=dn[v];E||(E=dn[v]=$("ON_PROPERTY"+v)),i.set=function(V){let T=this;if(!T&&n===ge&&(T=ge),!T)return;typeof T[E]=="function"&&T.removeEventListener(v,Gi),_?.call(T,null),T[E]=V,typeof V=="function"&&T.addEventListener(v,Gi,!1)},i.get=function(){let V=this;if(!V&&n===ge&&(V=ge),!V)return null;let T=V[E];if(T)return T;if(a){let O=a.call(this);if(O)return i.set.call(this,O),typeof V[Br]=="function"&&V.removeAttribute(t),O}return null},Qn(n,t,i),n[r]=!0}function Yi(n,t,e){if(t)for(let i=0;i<t.length;i++)Hi(n,"on"+t[i],e);else{let i=[];for(let r in n)r.slice(0,2)=="on"&&i.push(r);for(let r=0;r<i.length;r++)Hi(n,i[r],e)}}var Be=$("originalInstance");function Zt(n){let t=ge[n];if(!t)return;ge[$(n)]=t,ge[n]=function(){let r=oi(arguments,n);switch(r.length){case 0:this[Be]=new t;break;case 1:this[Be]=new t(r[0]);break;case 2:this[Be]=new t(r[0],r[1]);break;case 3:this[Be]=new t(r[0],r[1],r[2]);break;case 4:this[Be]=new t(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},it(ge[n],t);let e=new t(function(){}),i;for(i in e)n==="XMLHttpRequest"&&i==="responseBlob"||(function(r){typeof e[r]=="function"?ge[n].prototype[r]=function(){return this[Be][r].apply(this[Be],arguments)}:Qn(ge[n].prototype,r,{set:function(a){typeof a=="function"?(this[Be][r]=ii(a,n+"."+r),it(this[Be][r],a)):this[Be][r]=a},get:function(){return this[Be][r]}})})(i);for(i in t)i!=="prototype"&&t.hasOwnProperty(i)&&(ge[n][i]=t[i])}function Wr(n,t){if(typeof Object.getOwnPropertySymbols!="function")return;Object.getOwnPropertySymbols(n).forEach(i=>{let r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,{get:function(){return n[i]},set:function(a){r&&(!r.writable||typeof r.set!="function")||(n[i]=a)},enumerable:r?r.enumerable:!0,configurable:r?r.configurable:!0})})}var Zr=!1;function nt(n,t,e){let i=n;for(;i&&!i.hasOwnProperty(t);)i=ei(i);!i&&n[t]&&(i=n);let r=$(t),a=null;if(i&&(!(a=i[r])||!i.hasOwnProperty(r))){a=i[r]=i[t];let _=i&&qt(i,t);if(zi(_)){let v=e(a,r,t);i[t]=function(){return v(this,arguments)},it(i[t],a),Zr&&Wr(a,i[t])}}return a}function qr(n,t,e){let i=null;function r(a){let _=a.data;return _.args[_.cbIdx]=function(){a.invoke.apply(this,arguments)},i.apply(_.target,_.args),a}i=nt(n,t,a=>function(_,v){let E=e(_,v);return E.cbIdx>=0&&typeof v[E.cbIdx]=="function"?ri(E.name,v[E.cbIdx],E,r):a.apply(_,v)})}function it(n,t){n[$("OriginalDelegate")]=t}function Wi(n){return typeof n=="function"}function Zi(n){return typeof n=="number"}var zr={useG:!0},Fe={},Ki={},Ji=new RegExp("^"+zt+"(\\w+)(true|false)$"),Qi=$("propagationStopped");function er(n,t){let e=(t?t(n):n)+tt,i=(t?t(n):n)+et,r=zt+e,a=zt+i;Fe[n]={},Fe[n][tt]=r,Fe[n][et]=a}function $r(n,t,e,i){let r=i&&i.add||ti,a=i&&i.rm||ni,_=i&&i.listeners||"eventListeners",v=i&&i.rmAll||"removeAllListeners",E=$(r),V="."+r+":",T="prependListener",O="."+T+":",W=function(w,b,K){if(w.isRemoved)return;let z=w.callback;typeof z=="object"&&z.handleEvent&&(w.callback=S=>z.handleEvent(S),w.originalDelegate=z);let ne;try{w.invoke(w,b,[K])}catch(S){ne=S}let J=w.options;if(J&&typeof J=="object"&&J.once){let S=w.originalDelegate?w.originalDelegate:w.callback;b[a].call(b,K.type,S,J)}return ne};function q(w,b,K){if(b=b||n.event,!b)return;let z=w||b.target||n,ne=z[Fe[b.type][K?et:tt]];if(ne){let J=[];if(ne.length===1){let S=W(ne[0],z,b);S&&J.push(S)}else{let S=ne.slice();for(let le=0;le<S.length&&!(b&&b[Qi]===!0);le++){let R=W(S[le],z,b);R&&J.push(R)}}if(J.length===1)throw J[0];for(let S=0;S<J.length;S++){let le=J[S];t.nativeScheduleMicroTask(()=>{throw le})}}}let Ce=function(w){return q(this,w,!1)},ae=function(w){return q(this,w,!0)};function Te(w,b){if(!w)return!1;let K=!0;b&&b.useG!==void 0&&(K=b.useG);let z=b&&b.vh,ne=!0;b&&b.chkDup!==void 0&&(ne=b.chkDup);let J=!1;b&&b.rt!==void 0&&(J=b.rt);let S=w;for(;S&&!S.hasOwnProperty(r);)S=ei(S);if(!S&&w[r]&&(S=w),!S||S[E])return!1;let le=b&&b.eventNameToString,R={},P=S[E]=S[r],B=S[$(a)]=S[a],x=S[$(_)]=S[_],Ee=S[$(v)]=S[v],we;b&&b.prepend&&(we=S[$(b.prepend)]=S[b.prepend]);function Q(p,h){return h?typeof p=="boolean"?{capture:p,passive:!0}:p?typeof p=="object"&&p.passive!==!1?Nr(Bi({},p),{passive:!0}):p:{passive:!0}:p}let X=function(p){if(!R.isExisting)return P.call(R.target,R.eventName,R.capture?ae:Ce,R.options)},m=function(p){if(!p.isRemoved){let h=Fe[p.eventName],M;h&&(M=h[p.capture?et:tt]);let I=M&&p.target[M];if(I){for(let k=0;k<I.length;k++)if(I[k]===p){I.splice(k,1),p.isRemoved=!0,p.removeAbortListener&&(p.removeAbortListener(),p.removeAbortListener=null),I.length===0&&(p.allRemoved=!0,p.target[M]=null);break}}}if(p.allRemoved)return B.call(p.target,p.eventName,p.capture?ae:Ce,p.options)},d=function(p){return P.call(R.target,R.eventName,p.invoke,R.options)},c=function(p){return we.call(R.target,R.eventName,p.invoke,R.options)},A=function(p){return B.call(p.target,p.eventName,p.invoke,p.options)},Y=K?X:d,Z=K?m:A,We=function(p,h){let M=typeof h;return M==="function"&&p.callback===h||M==="object"&&p.originalDelegate===h},Ye=b?.diff||We,Ke=Zone[$("UNPATCHED_EVENTS")],Ue=n[$("PASSIVE_EVENTS")];function g(p){if(typeof p=="object"&&p!==null){let h=Bi({},p);return p.signal&&(h.signal=p.signal),h}return p}let f=function(p,h,M,I,k=!1,U=!1){return function(){let L=this||n,j=arguments[0];b&&b.transferEventName&&(j=b.transferEventName(j));let ee=arguments[1];if(!ee)return p.apply(this,arguments);if(fn&&j==="uncaughtException")return p.apply(this,arguments);let te=!1;if(typeof ee!="function"){if(!ee.handleEvent)return p.apply(this,arguments);te=!0}if(z&&!z(p,ee,L,arguments))return;let lt=!!Ue&&Ue.indexOf(j)!==-1,Le=g(Q(arguments[2],lt)),_t=Le?.signal;if(_t?.aborted)return;if(Ke){for(let Ze=0;Ze<Ke.length;Ze++)if(j===Ke[Ze])return lt?p.call(L,j,ee,Le):p.apply(this,arguments)}let Un=Le?typeof Le=="boolean"?!0:Le.capture:!1,_i=Le&&typeof Le=="object"?Le.once:!1,xr=Zone.current,Ln=Fe[j];Ln||(er(j,le),Ln=Fe[j]);let vi=Ln[Un?et:tt],kt=L[vi],yi=!1;if(kt){if(yi=!0,ne){for(let Ze=0;Ze<kt.length;Ze++)if(Ye(kt[Ze],ee))return}}else kt=L[vi]=[];let nn,bi=L.constructor.name,Ci=Ki[bi];Ci&&(nn=Ci[j]),nn||(nn=bi+h+(le?le(j):j)),R.options=Le,_i&&(R.options.once=!1),R.target=L,R.capture=Un,R.eventName=j,R.isExisting=yi;let Ut=K?zr:void 0;Ut&&(Ut.taskData=R),_t&&(R.options.signal=void 0);let je=xr.scheduleEventTask(nn,ee,Ut,M,I);if(_t){R.options.signal=_t;let Ze=()=>je.zone.cancelTask(je);p.call(_t,"abort",Ze,{once:!0}),je.removeAbortListener=()=>_t.removeEventListener("abort",Ze)}if(R.target=null,Ut&&(Ut.taskData=null),_i&&(R.options.once=!0),typeof je.options!="boolean"&&(je.options=Le),je.target=L,je.capture=Un,je.eventName=j,te&&(je.originalDelegate=ee),U?kt.unshift(je):kt.push(je),k)return L}};return S[r]=f(P,V,Y,Z,J),we&&(S[T]=f(we,O,c,Z,J,!0)),S[a]=function(){let p=this||n,h=arguments[0];b&&b.transferEventName&&(h=b.transferEventName(h));let M=arguments[2],I=M?typeof M=="boolean"?!0:M.capture:!1,k=arguments[1];if(!k)return B.apply(this,arguments);if(z&&!z(B,k,p,arguments))return;let U=Fe[h],L;U&&(L=U[I?et:tt]);let j=L&&p[L];if(j)for(let ee=0;ee<j.length;ee++){let te=j[ee];if(Ye(te,k)){if(j.splice(ee,1),te.isRemoved=!0,j.length===0&&(te.allRemoved=!0,p[L]=null,!I&&typeof h=="string")){let lt=zt+"ON_PROPERTY"+h;p[lt]=null}return te.zone.cancelTask(te),J?p:void 0}}return B.apply(this,arguments)},S[_]=function(){let p=this||n,h=arguments[0];b&&b.transferEventName&&(h=b.transferEventName(h));let M=[],I=tr(p,le?le(h):h);for(let k=0;k<I.length;k++){let U=I[k],L=U.originalDelegate?U.originalDelegate:U.callback;M.push(L)}return M},S[v]=function(){let p=this||n,h=arguments[0];if(h){b&&b.transferEventName&&(h=b.transferEventName(h));let M=Fe[h];if(M){let I=M[tt],k=M[et],U=p[I],L=p[k];if(U){let j=U.slice();for(let ee=0;ee<j.length;ee++){let te=j[ee],lt=te.originalDelegate?te.originalDelegate:te.callback;this[a].call(this,h,lt,te.options)}}if(L){let j=L.slice();for(let ee=0;ee<j.length;ee++){let te=j[ee],lt=te.originalDelegate?te.originalDelegate:te.callback;this[a].call(this,h,lt,te.options)}}}}else{let M=Object.keys(p);for(let I=0;I<M.length;I++){let k=M[I],U=Ji.exec(k),L=U&&U[1];L&&L!=="removeListener"&&this[v].call(this,L)}this[v].call(this,"removeListener")}if(J)return this},it(S[r],P),it(S[a],B),Ee&&it(S[v],Ee),x&&it(S[_],x),!0}let me=[];for(let w=0;w<e.length;w++)me[w]=Te(e[w],i);return me}function tr(n,t){if(!t){let a=[];for(let _ in n){let v=Ji.exec(_),E=v&&v[1];if(E&&(!t||E===t)){let V=n[_];if(V)for(let T=0;T<V.length;T++)a.push(V[T])}}return a}let e=Fe[t];e||(er(t),e=Fe[t]);let i=n[e[tt]],r=n[e[et]];return i?r?i.concat(r):i.slice():r?r.slice():[]}function Xr(n,t){let e=n.Event;e&&e.prototype&&t.patchMethod(e.prototype,"stopImmediatePropagation",i=>function(r,a){r[Qi]=!0,i&&i.apply(r,a)})}function Yr(n,t){t.patchMethod(n,"queueMicrotask",e=>function(i,r){Zone.current.scheduleMicroTask("queueMicrotask",r[0])})}var cn=$("zoneTask");function It(n,t,e,i){let r=null,a=null;t+=i,e+=i;let _={};function v(V){let T=V.data;T.args[0]=function(){return V.invoke.apply(this,arguments)};let O=r.apply(n,T.args);return Zi(O)?T.handleId=O:(T.handle=O,T.isRefreshable=Wi(O.refresh)),V}function E(V){let{handle:T,handleId:O}=V.data;return a.call(n,T??O)}r=nt(n,t,V=>function(T,O){var W;if(Wi(O[0])){let q={isRefreshable:!1,isPeriodic:i==="Interval",delay:i==="Timeout"||i==="Interval"?O[1]||0:void 0,args:O},Ce=O[0];O[0]=function(){try{return Ce.apply(this,arguments)}finally{let{handle:z,handleId:ne,isPeriodic:J,isRefreshable:S}=q;!J&&!S&&(ne?delete _[ne]:z&&(z[cn]=null))}};let ae=ri(t,O[0],q,v,E);if(!ae)return ae;let{handleId:Te,handle:me,isRefreshable:w,isPeriodic:b}=ae.data;if(Te)_[Te]=ae;else if(me&&(me[cn]=ae,w&&!b)){let K=me.refresh;me.refresh=function(){let{zone:z,state:ne}=ae;return ne==="notScheduled"?(ae._state="scheduled",z._updateTaskCount(ae,1)):ne==="running"&&(ae._state="scheduling"),K.call(this)}}return(W=me??Te)!=null?W:ae}else return V.apply(n,O)}),a=nt(n,e,V=>function(T,O){let W=O[0],q;Zi(W)?(q=_[W],delete _[W]):(q=W?.[cn],q?W[cn]=null:q=W),q?.type?q.cancelFn&&q.zone.cancelTask(q):V.apply(n,O)})}function Kr(n,t){let{isBrowser:e,isMix:i}=t.getGlobalObjects();if(!e&&!i||!n.customElements||!("customElements"in n))return;let r=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];t.patchCallbacks(t,n.customElements,"customElements","define",r)}function Jr(n,t){if(Zone[t.symbol("patchEventTarget")])return;let{eventNames:e,zoneSymbolEventNames:i,TRUE_STR:r,FALSE_STR:a,ZONE_SYMBOL_PREFIX:_}=t.getGlobalObjects();for(let E=0;E<e.length;E++){let V=e[E],T=V+a,O=V+r,W=_+T,q=_+O;i[V]={},i[V][a]=W,i[V][r]=q}let v=n.EventTarget;if(!(!v||!v.prototype))return t.patchEventTarget(n,t,[v&&v.prototype]),!0}function Qr(n,t){t.patchEventPrototype(n,t)}function nr(n,t,e){if(!e||e.length===0)return t;let i=e.filter(a=>a.target===n);if(i.length===0)return t;let r=i[0].ignoreProperties;return t.filter(a=>r.indexOf(a)===-1)}function qi(n,t,e,i){if(!n)return;let r=nr(n,t,e);Yi(n,r,i)}function Jn(n){return Object.getOwnPropertyNames(n).filter(t=>t.startsWith("on")&&t.length>2).map(t=>t.substring(2))}function eo(n,t){if(fn&&!Xi||Zone[n.symbol("patchEvents")])return;let e=t.__Zone_ignore_on_properties,i=[];if(si){let r=window;i=i.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]),qi(r,Jn(r),e,ei(r))}i=i.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let r=0;r<i.length;r++){let a=t[i[r]];a?.prototype&&qi(a.prototype,Jn(a.prototype),e)}}function to(n){n.__load_patch("timers",t=>{let i="clear";It(t,"set",i,"Timeout"),It(t,"set",i,"Interval"),It(t,"set",i,"Immediate")}),n.__load_patch("requestAnimationFrame",t=>{It(t,"request","cancel","AnimationFrame"),It(t,"mozRequest","mozCancel","AnimationFrame"),It(t,"webkitRequest","webkitCancel","AnimationFrame")}),n.__load_patch("blocking",(t,e)=>{let i=["alert","prompt","confirm"];for(let r=0;r<i.length;r++){let a=i[r];nt(t,a,(_,v,E)=>function(V,T){return e.current.run(_,t,T,E)})}}),n.__load_patch("EventTarget",(t,e,i)=>{Qr(t,i),Jr(t,i);let r=t.XMLHttpRequestEventTarget;r&&r.prototype&&i.patchEventTarget(t,i,[r.prototype])}),n.__load_patch("MutationObserver",(t,e,i)=>{Zt("MutationObserver"),Zt("WebKitMutationObserver")}),n.__load_patch("IntersectionObserver",(t,e,i)=>{Zt("IntersectionObserver")}),n.__load_patch("FileReader",(t,e,i)=>{Zt("FileReader")}),n.__load_patch("on_property",(t,e,i)=>{eo(i,t)}),n.__load_patch("customElements",(t,e,i)=>{Kr(t,i)}),n.__load_patch("XHR",(t,e)=>{V(t);let i=$("xhrTask"),r=$("xhrSync"),a=$("xhrListener"),_=$("xhrScheduled"),v=$("xhrURL"),E=$("xhrErrorBeforeScheduled");function V(T){let O=T.XMLHttpRequest;if(!O)return;let W=O.prototype;function q(P){return P[i]}let Ce=W[$n],ae=W[Xn];if(!Ce){let P=T.XMLHttpRequestEventTarget;if(P){let B=P.prototype;Ce=B[$n],ae=B[Xn]}}let Te="readystatechange",me="scheduled";function w(P){let B=P.data,x=B.target;x[_]=!1,x[E]=!1;let Ee=x[a];Ce||(Ce=x[$n],ae=x[Xn]),Ee&&ae.call(x,Te,Ee);let we=x[a]=()=>{if(x.readyState===x.DONE)if(!B.aborted&&x[_]&&P.state===me){let X=x[e.__symbol__("loadfalse")];if(x.status!==0&&X&&X.length>0){let m=P.invoke;P.invoke=function(){let d=x[e.__symbol__("loadfalse")];for(let c=0;c<d.length;c++)d[c]===P&&d.splice(c,1);!B.aborted&&P.state===me&&m.call(P)},X.push(P)}else P.invoke()}else!B.aborted&&x[_]===!1&&(x[E]=!0)};return Ce.call(x,Te,we),x[i]||(x[i]=P),le.apply(x,B.args),x[_]=!0,P}function b(){}function K(P){let B=P.data;return B.aborted=!0,R.apply(B.target,B.args)}let z=nt(W,"open",()=>function(P,B){return P[r]=B[2]==!1,P[v]=B[1],z.apply(P,B)}),ne="XMLHttpRequest.send",J=$("fetchTaskAborting"),S=$("fetchTaskScheduling"),le=nt(W,"send",()=>function(P,B){if(e.current[S]===!0||P[r])return le.apply(P,B);{let x={target:P,url:P[v],isPeriodic:!1,args:B,aborted:!1},Ee=ri(ne,b,x,w,K);P&&P[E]===!0&&!x.aborted&&Ee.state===me&&Ee.invoke()}}),R=nt(W,"abort",()=>function(P,B){let x=q(P);if(x&&typeof x.type=="string"){if(x.cancelFn==null||x.data&&x.data.aborted)return;x.zone.cancelTask(x)}else if(e.current[J]===!0)return R.apply(P,B)})}}),n.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&Gr(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),n.__load_patch("PromiseRejectionEvent",(t,e)=>{function i(r){return function(a){tr(t,r).forEach(v=>{let E=t.PromiseRejectionEvent;if(E){let V=new E(r,{promise:a.promise,reason:a.rejection});v.invoke(V)}})}}t.PromiseRejectionEvent&&(e[$("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),e[$("rejectionHandledHandler")]=i("rejectionhandled"))}),n.__load_patch("queueMicrotask",(t,e,i)=>{Yr(t,i)})}function no(n){n.__load_patch("ZoneAwarePromise",(t,e,i)=>{let r=Object.getOwnPropertyDescriptor,a=Object.defineProperty;function _(g){if(g&&g.toString===Object.prototype.toString){let f=g.constructor&&g.constructor.name;return(f||"")+": "+JSON.stringify(g)}return g?g.toString():Object.prototype.toString.call(g)}let v=i.symbol,E=[],V=t[v("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,T=v("Promise"),O=v("then"),W="__creationTrace__";i.onUnhandledError=g=>{if(i.showUncaughtError()){let f=g&&g.rejection;f?console.error("Unhandled Promise rejection:",f instanceof Error?f.message:f,"; Zone:",g.zone.name,"; Task:",g.task&&g.task.source,"; Value:",f,f instanceof Error?f.stack:void 0):console.error(g)}},i.microtaskDrainDone=()=>{for(;E.length;){let g=E.shift();try{g.zone.runGuarded(()=>{throw g.throwOriginal?g.rejection:g})}catch(f){Ce(f)}}};let q=v("unhandledPromiseRejectionHandler");function Ce(g){i.onUnhandledError(g);try{let f=e[q];typeof f=="function"&&f.call(this,g)}catch{}}function ae(g){return g&&typeof g.then=="function"}function Te(g){return g}function me(g){return Z.reject(g)}let w=v("state"),b=v("value"),K=v("finally"),z=v("parentPromiseValue"),ne=v("parentPromiseState"),J="Promise.then",S=null,le=!0,R=!1,P=0;function B(g,f){return p=>{try{Q(g,f,p)}catch(h){Q(g,!1,h)}}}let x=function(){let g=!1;return function(p){return function(){g||(g=!0,p.apply(null,arguments))}}},Ee="Promise resolved with itself",we=v("currentTaskTrace");function Q(g,f,p){let h=x();if(g===p)throw new TypeError(Ee);if(g[w]===S){let M=null;try{(typeof p=="object"||typeof p=="function")&&(M=p&&p.then)}catch(I){return h(()=>{Q(g,!1,I)})(),g}if(f!==R&&p instanceof Z&&p.hasOwnProperty(w)&&p.hasOwnProperty(b)&&p[w]!==S)m(p),Q(g,p[w],p[b]);else if(f!==R&&typeof M=="function")try{M.call(p,h(B(g,f)),h(B(g,!1)))}catch(I){h(()=>{Q(g,!1,I)})()}else{g[w]=f;let I=g[b];if(g[b]=p,g[K]===K&&f===le&&(g[w]=g[ne],g[b]=g[z]),f===R&&p instanceof Error){let k=e.currentTask&&e.currentTask.data&&e.currentTask.data[W];k&&a(p,we,{configurable:!0,enumerable:!1,writable:!0,value:k})}for(let k=0;k<I.length;)d(g,I[k++],I[k++],I[k++],I[k++]);if(I.length==0&&f==R){g[w]=P;let k=p;try{throw new Error("Uncaught (in promise): "+_(p)+(p&&p.stack?`
`+p.stack:""))}catch(U){k=U}V&&(k.throwOriginal=!0),k.rejection=p,k.promise=g,k.zone=e.current,k.task=e.currentTask,E.push(k),i.scheduleMicroTask()}}}return g}let X=v("rejectionHandledHandler");function m(g){if(g[w]===P){try{let f=e[X];f&&typeof f=="function"&&f.call(this,{rejection:g[b],promise:g})}catch{}g[w]=R;for(let f=0;f<E.length;f++)g===E[f].promise&&E.splice(f,1)}}function d(g,f,p,h,M){m(g);let I=g[w],k=I?typeof h=="function"?h:Te:typeof M=="function"?M:me;f.scheduleMicroTask(J,()=>{try{let U=g[b],L=!!p&&K===p[K];L&&(p[z]=U,p[ne]=I);let j=f.run(k,void 0,L&&k!==me&&k!==Te?[]:[U]);Q(p,!0,j)}catch(U){Q(p,!1,U)}},p)}let c="function ZoneAwarePromise() { [native code] }",A=function(){},Y=t.AggregateError;class Z{static toString(){return c}static resolve(f){return f instanceof Z?f:Q(new this(null),le,f)}static reject(f){return Q(new this(null),R,f)}static withResolvers(){let f={};return f.promise=new Z((p,h)=>{f.resolve=p,f.reject=h}),f}static any(f){if(!f||typeof f[Symbol.iterator]!="function")return Promise.reject(new Y([],"All promises were rejected"));let p=[],h=0;try{for(let k of f)h++,p.push(Z.resolve(k))}catch{return Promise.reject(new Y([],"All promises were rejected"))}if(h===0)return Promise.reject(new Y([],"All promises were rejected"));let M=!1,I=[];return new Z((k,U)=>{for(let L=0;L<p.length;L++)p[L].then(j=>{M||(M=!0,k(j))},j=>{I.push(j),h--,h===0&&(M=!0,U(new Y(I,"All promises were rejected")))})})}static race(f){let p,h,M=new this((U,L)=>{p=U,h=L});function I(U){p(U)}function k(U){h(U)}for(let U of f)ae(U)||(U=this.resolve(U)),U.then(I,k);return M}static all(f){return Z.allWithCallback(f)}static allSettled(f){return(this&&this.prototype instanceof Z?this:Z).allWithCallback(f,{thenCallback:h=>({status:"fulfilled",value:h}),errorCallback:h=>({status:"rejected",reason:h})})}static allWithCallback(f,p){let h,M,I=new this((j,ee)=>{h=j,M=ee}),k=2,U=0,L=[];for(let j of f){ae(j)||(j=this.resolve(j));let ee=U;try{j.then(te=>{L[ee]=p?p.thenCallback(te):te,k--,k===0&&h(L)},te=>{p?(L[ee]=p.errorCallback(te),k--,k===0&&h(L)):M(te)})}catch(te){M(te)}k++,U++}return k-=2,k===0&&h(L),I}constructor(f){let p=this;if(!(p instanceof Z))throw new Error("Must be an instanceof Promise.");p[w]=S,p[b]=[];try{let h=x();f&&f(h(B(p,le)),h(B(p,R)))}catch(h){Q(p,!1,h)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return Z}then(f,p){var h;let M=(h=this.constructor)==null?void 0:h[Symbol.species];(!M||typeof M!="function")&&(M=this.constructor||Z);let I=new M(A),k=e.current;return this[w]==S?this[b].push(k,I,f,p):d(this,k,I,f,p),I}catch(f){return this.then(null,f)}finally(f){var p;let h=(p=this.constructor)==null?void 0:p[Symbol.species];(!h||typeof h!="function")&&(h=Z);let M=new h(A);M[K]=K;let I=e.current;return this[w]==S?this[b].push(I,M,f,f):d(this,I,M,f,f),M}}Z.resolve=Z.resolve,Z.reject=Z.reject,Z.race=Z.race,Z.all=Z.all;let We=t[T]=t.Promise;t.Promise=Z;let Ye=v("thenPatched");function Ke(g){let f=g.prototype,p=r(f,"then");if(p&&(p.writable===!1||!p.configurable))return;let h=f.then;f[O]=h,g.prototype.then=function(M,I){return new Z((U,L)=>{h.call(this,U,L)}).then(M,I)},g[Ye]=!0}i.patchThen=Ke;function Ue(g){return function(f,p){let h=g.apply(f,p);if(h instanceof Z)return h;let M=h.constructor;return M[Ye]||Ke(M),h}}return We&&(Ke(We),nt(t,"fetch",g=>Ue(g))),Promise[e.__symbol__("uncaughtPromiseErrors")]=E,Z})}function io(n){n.__load_patch("toString",t=>{let e=Function.prototype.toString,i=$("OriginalDelegate"),r=$("Promise"),a=$("Error"),_=function(){if(typeof this=="function"){let T=this[i];if(T)return typeof T=="function"?e.call(T):Object.prototype.toString.call(T);if(this===Promise){let O=t[r];if(O)return e.call(O)}if(this===Error){let O=t[a];if(O)return e.call(O)}}return e.call(this)};_[i]=e,Function.prototype.toString=_;let v=Object.prototype.toString,E="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?E:v.call(this)}})}function ro(n,t,e,i,r){let a=Zone.__symbol__(i);if(t[a])return;let _=t[a]=t[i];t[i]=function(v,E,V){return E&&E.prototype&&r.forEach(function(T){let O=`${e}.${i}::`+T,W=E.prototype;try{if(W.hasOwnProperty(T)){let q=n.ObjectGetOwnPropertyDescriptor(W,T);q&&q.value?(q.value=n.wrapWithCurrentZone(q.value,O),n._redefineProperty(E.prototype,T,q)):W[T]&&(W[T]=n.wrapWithCurrentZone(W[T],O))}else W[T]&&(W[T]=n.wrapWithCurrentZone(W[T],O))}catch{}}),_.call(t,v,E,V)},n.attachOriginToPatched(t[i],_)}function oo(n){n.__load_patch("util",(t,e,i)=>{let r=Jn(t);i.patchOnProperties=Yi,i.patchMethod=nt,i.bindArguments=oi,i.patchMacroTask=qr;let a=e.__symbol__("BLACK_LISTED_EVENTS"),_=e.__symbol__("UNPATCHED_EVENTS");t[_]&&(t[a]=t[_]),t[a]&&(e[a]=e[_]=t[a]),i.patchEventPrototype=Xr,i.patchEventTarget=$r,i.ObjectDefineProperty=Qn,i.ObjectGetOwnPropertyDescriptor=qt,i.ObjectCreate=Lr,i.ArraySlice=jr,i.patchClass=Zt,i.wrapWithCurrentZone=ii,i.filterProperties=nr,i.attachOriginToPatched=it,i._redefineProperty=Object.defineProperty,i.patchCallbacks=ro,i.getGlobalObjects=()=>({globalSources:Ki,zoneSymbolEventNames:Fe,eventNames:r,isBrowser:si,isMix:Xi,isNode:fn,TRUE_STR:et,FALSE_STR:tt,ZONE_SYMBOL_PREFIX:zt,ADD_EVENT_LISTENER_STR:ti,REMOVE_EVENT_LISTENER_STR:ni})})}function so(n){no(n),io(n),oo(n)}var ir=Ur();so(ir);to(ir);var rt=(i=>(i.ADMIN="Admin",i.DEPARTMENT_HEAD="Department Head",i.REGULAR_USER="Regular User",i))(rt||{});var ao=n=>["/tasks",n];function lo(n,t){if(n&1&&(o(0,"p",22),l(1),s()),n&2){let e=N();u(),C(e.task.description)}}function uo(n,t){if(n&1&&(o(0,"div",9)(1,"span"),l(2,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0621:"),s(),o(3,"span"),l(4),Ve(5,"date"),s()()),n&2){let e=N();u(4),C(Ie(5,1,e.task.startDate,"shortDate"))}}function co(n,t){if(n&1&&(o(0,"p",11),l(1,"\u0627\u0644\u0645\u0643\u0644\u0641: "),o(2,"span",23),l(3),s()()),n&2){let e=N();u(3),C(e.userMap[e.task.assignedTo]||"Unknown")}}function mo(n,t){if(n&1&&(o(0,"div",24)(1,"strong"),l(2,"\u0639\u0642\u0628\u0629:"),s(),l(3),s()),n&2){let e=N();u(3),se(" ",e.task.obstacle," ")}}function po(n,t){if(n&1){let e=ue();o(0,"button",25),H("click",function(){ie(e);let r=N();return re(r.onAction("submitForReview"))}),l(1," \u0625\u0631\u0633\u0627\u0644 \u0644\u0644\u0645\u0631\u0627\u062C\u0639\u0629 "),s()}}function fo(n,t){if(n&1){let e=ue();o(0,"button",25),H("click",function(){ie(e);let r=N();return re(r.onAction("approveCredit"))}),l(1," \u0645\u0648\u0627\u0641\u0642\u0629 \u0627\u0644\u0627\u0626\u062A\u0645\u0627\u0646 "),s()}}function ho(n,t){if(n&1){let e=ue();o(0,"button",26),H("click",function(){ie(e);let r=N();return re(r.onAction("reportObstacle"))}),l(1," \u0625\u0628\u0644\u0627\u063A \u0639\u0646 \u0639\u0642\u0628\u0629 "),s()}}function go(n,t){if(n&1){let e=ue();o(0,"button",27),H("click",function(){ie(e);let r=N();return re(r.onAction("completeProduction"))}),l(1," \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0625\u0646\u062A\u0627\u062C "),s()}}function _o(n,t){if(n&1){let e=ue();o(0,"button",28),H("click",function(){ie(e);let r=N();return re(r.onAction("resolveObstacle"))}),l(1," \u062D\u0644 \u0627\u0644\u0639\u0642\u0628\u0629 "),s()}}function vo(n,t){if(n&1){let e=ue();o(0,"button",29),H("click",function(){ie(e);let r=N();return re(r.onAction("closeTask"))}),l(1," \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0645\u0647\u0645\u0629 "),s()}}var hn=class n{task;currentUser=null;userMap={};action=new yt;TaskStatus=Wt;priorityMap={High:"\u0639\u0627\u0644\u064A\u0629",Medium:"\u0645\u062A\u0648\u0633\u0637\u0629",Low:"\u0645\u0646\u062E\u0641\u0636\u0629"};statusMap={New:"\u062C\u062F\u064A\u062F","Under Review":"\u0642\u064A\u062F \u0627\u0644\u0645\u0631\u0627\u062C\u0639\u0629","Awaiting Approval":"\u0628\u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629","In Progress":"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630","Blocked by Obstacle":"\u0645\u062A\u0648\u0642\u0641 (\u0639\u0642\u0628\u0629)",Completed:"\u0645\u0643\u062A\u0645\u0644",Closed:"\u0645\u063A\u0644\u0642"};getBorderClass(){switch(this.task.priority){case"High":return"border-danger";case"Medium":return"border-warning";case"Low":return"border-success";default:return"border-secondary"}}getPriorityBadgeClass(){switch(this.task.priority){case"High":return"bg-danger-subtle text-danger-emphasis";case"Medium":return"bg-warning-subtle text-warning-emphasis";case"Low":return"bg-success-subtle text-success-emphasis";default:return"bg-secondary-subtle text-secondary-emphasis"}}isDelayed(){return this.task.actualTime>this.task.plannedTime*1.2}onAction(t,e){this.action.emit({type:t,payload:e})}canPerformAction(t){if(!this.currentUser)return!1;let e=this.currentUser.role;if(e==="Admin"||e==="Department Head")return!0;if(e==="Regular User"){if(t==="approveCredit"||t==="closeTask")return!1;if(this.currentUser.department===this.task.currentDepartment)return!0}return!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=oe({type:n,selectors:[["app-task-card"]],inputs:{task:"task",currentUser:"currentUser",userMap:"userMap"},outputs:{action:"action"},decls:41,vars:30,consts:[[1,"card","mb-3","shadow-sm","border-start","border-5",3,"ngClass"],[1,"card-body","p-3"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[2,"cursor","pointer",3,"routerLink"],[1,"card-title","mb-1","text-primary"],[1,"fw-bold","text-secondary","small"],[1,"badge","rounded-pill",3,"ngClass"],["class","card-text text-muted small mb-2",4,"ngIf"],[1,"mb-2","small"],[1,"d-flex","justify-content-between","text-muted"],["class","d-flex justify-content-between text-muted",4,"ngIf"],[1,"mb-1","text-muted","small"],[1,"fw-medium","text-dark"],["class","mb-1 text-muted small",4,"ngIf"],[1,"mt-2","d-flex","justify-content-between","small","text-secondary"],["class","mt-2 p-2 bg-danger-subtle text-danger rounded small border border-danger-subtle",4,"ngIf"],[1,"mt-3","d-flex","flex-wrap","gap-2"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning text-dark",3,"click",4,"ngIf"],["class","btn btn-sm btn-dark",3,"click",4,"ngIf"],[1,"card-text","text-muted","small","mb-2"],[1,"fw-medium","text-primary"],[1,"mt-2","p-2","bg-danger-subtle","text-danger","rounded","small","border","border-danger-subtle"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-warning","text-dark",3,"click"],[1,"btn","btn-sm","btn-dark",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),l(5),s(),o(6,"span",5),l(7),s()(),o(8,"span",6),l(9),s()(),G(10,lo,2,1,"p",7),o(11,"div",8)(12,"div",9)(13,"span"),l(14,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0646\u0634\u0627\u0621:"),s(),o(15,"span"),l(16),Ve(17,"date"),s()(),G(18,uo,6,4,"div",10),s(),o(19,"p",11),l(20,"\u0627\u0644\u0637\u0627\u0644\u0628: "),o(21,"span",12),l(22),s()(),o(23,"p",11),l(24,"\u0627\u0644\u0642\u0633\u0645: "),o(25,"span",12),l(26),s()(),G(27,co,4,1,"p",13),o(28,"div",14)(29,"span"),l(30),s(),o(31,"span"),l(32),s()(),G(33,mo,4,1,"div",15),o(34,"div",16),G(35,po,2,0,"button",17)(36,fo,2,0,"button",17)(37,ho,2,0,"button",18)(38,go,2,0,"button",19)(39,_o,2,0,"button",20)(40,vo,2,0,"button",21),s()()()),e&2&&(y("ngClass",i.getBorderClass()),u(3),y("routerLink",At(28,ao,i.task.id)),u(2),C(i.task.name),u(2),se("#",i.task.id.slice(0,8)),u(),y("ngClass",i.getPriorityBadgeClass()),u(),se(" ",i.priorityMap[i.task.priority]," "),u(),y("ngIf",i.task.description),u(6),C(Ie(17,25,i.task.createdAt,"shortDate")),u(2),y("ngIf",i.task.startDate),u(4),C(i.task.requestingParty),u(4),C(i.task.currentDepartment),u(),y("ngIf",i.task.assignedTo),u(3),se("\u0627\u0644\u0645\u062E\u0637\u0637: ",i.task.plannedTime," \u064A\u0648\u0645"),u(),Ct("fw-bold",i.isDelayed())("text-danger",i.isDelayed()),u(),se("\u0627\u0644\u0641\u0639\u0644\u064A: ",i.task.actualTime," \u064A\u0648\u0645"),u(),y("ngIf",i.task.obstacle),u(2),y("ngIf",i.task.status===i.TaskStatus.NEW&&i.canPerformAction("submitForReview")),u(),y("ngIf",i.task.status===i.TaskStatus.UNDER_REVIEW&&i.canPerformAction("approveCredit")),u(),y("ngIf",i.task.currentDepartment==="Production"&&i.task.status===i.TaskStatus.IN_PROGRESS&&i.canPerformAction("reportObstacle")),u(),y("ngIf",i.task.currentDepartment==="Production"&&i.task.status===i.TaskStatus.IN_PROGRESS&&i.canPerformAction("completeProduction")),u(),y("ngIf",i.task.status===i.TaskStatus.BLOCKED&&i.canPerformAction("resolveObstacle")),u(),y("ngIf",i.task.status===i.TaskStatus.COMPLETED&&i.canPerformAction("closeTask")))},dependencies:[ce,un,Oe,be,Me,xt],encapsulation:2})};var ve=class n{currentUserSubject=new ki(null);currentUser$=this.currentUserSubject.asObservable();mockUsers=[{id:"1",username:"admin",password:"password",role:"Admin"},{id:"2",username:"sales_head",password:"password",role:"Department Head",department:"Sales"},{id:"3",username:"sales_user",password:"password",role:"Regular User",department:"Sales"},{id:"4",username:"production_head",password:"password",role:"Department Head",department:"Production"},{id:"5",username:"production_user",password:"password",role:"Regular User",department:"Production"}];constructor(){let t=localStorage.getItem("currentUser");t&&this.currentUserSubject.next(JSON.parse(t))}login(t,e){let i=this.mockUsers.find(r=>r.username===t&&r.password===e);return i?Dt(i).pipe(St(500),Si(r=>{this.currentUserSubject.next(r),localStorage.setItem("currentUser",JSON.stringify(r))})):jn(()=>new Error("Invalid credentials"))}logout(){this.currentUserSubject.next(null),localStorage.removeItem("currentUser")}getCurrentUser(){return this.currentUserSubject.value}getUsers(){return Dt(this.mockUsers).pipe(St(500))}createUser(t){let e=Ae(de({},t),{id:Math.random().toString(36).substr(2,9)});return this.mockUsers.push(e),Dt(e).pipe(St(500))}updateUser(t,e){let i=this.mockUsers.findIndex(r=>r.id===t);return i!==-1?(this.mockUsers[i]=de(de({},this.mockUsers[i]),e),Dt(this.mockUsers[i]).pipe(St(500))):jn(()=>new Error("User not found"))}deleteUser(t){return this.mockUsers=this.mockUsers.filter(e=>e.id!==t),Dt(void 0).pipe(St(500))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"root"})};function yo(n,t){if(n&1){let e=ue();o(0,"app-task-card",12),H("action",function(r){let a=ie(e).$implicit,_=N(2);return re(_.handleAction(r,a))}),s()}if(n&2){let e=t.$implicit,i=N(2);y("task",e)("currentUser",i.currentUser)("userMap",i.userMap)}}function bo(n,t){if(n&1&&(o(0,"div",7)(1,"h2",8),l(2),o(3,"span",9),l(4),s()(),o(5,"div",10),G(6,yo,1,3,"app-task-card",11),s()()),n&2){let e=t.$implicit,i=N();u(2),se(" ",i.statusMap[e]," "),u(2),C(i.getTasksByStatus(e).length),u(2),y("ngForOf",i.getTasksByStatus(e))}}var gn=class n{constructor(t,e,i){this.taskService=t;this.userService=e;this.router=i;this.userService.currentUser$.subscribe(r=>{this.currentUser=r,this.loadTasks()})}tasks=[];columns=Object.values(Wt);statusMap={New:"\u062C\u062F\u064A\u062F","Under Review":"\u0642\u064A\u062F \u0627\u0644\u0645\u0631\u0627\u062C\u0639\u0629","Awaiting Approval":"\u0628\u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629","In Progress":"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630","Blocked by Obstacle":"\u0645\u062A\u0648\u0642\u0641 (\u0639\u0642\u0628\u0629)",Completed:"\u0645\u0643\u062A\u0645\u0644",Closed:"\u0645\u063A\u0644\u0642"};currentUser=null;userMap={};users=[];ngOnInit(){this.loadTasks(),this.loadUsers()}loadUsers(){this.userService.getUsers().subscribe(t=>{this.users=t,this.userMap=t.reduce((e,i)=>(e[i.id]=i.username,e),{})})}loadTasks(){this.taskService.getTasks().subscribe(t=>{if(!this.currentUser){this.tasks=[];return}this.currentUser.role==="Admin"?this.tasks=t:this.currentUser.role==="Department Head"?this.tasks=t.filter(e=>e.currentDepartment===this.currentUser?.department||e.assignedTo===this.currentUser?.id):this.tasks=t.filter(e=>e.assignedTo===this.currentUser?.id)})}getTasksByStatus(t){return this.tasks.filter(e=>e.status===t)}handleAction(t,e){if(!this.canPerformAction(t.type,e)){alert("\u0644\u064A\u0633 \u0644\u062F\u064A\u0643 \u0635\u0644\u0627\u062D\u064A\u0629 \u0644\u0644\u0642\u064A\u0627\u0645 \u0628\u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621");return}switch(t.type){case"submitForReview":this.taskService.submitForReview(e.id).subscribe(()=>this.loadTasks());break;case"approveCredit":this.taskService.approveCredit(e.id).subscribe(()=>this.loadTasks());break;case"reportObstacle":let i=prompt("\u0623\u062F\u062E\u0644 \u0648\u0635\u0641 \u0627\u0644\u0639\u0642\u0628\u0629:");i&&this.taskService.reportObstacle(e.id,i).subscribe(()=>this.loadTasks());break;case"resolveObstacle":this.taskService.resolveObstacle(e.id).subscribe(()=>this.loadTasks());break;case"completeProduction":this.taskService.completeProduction(e.id).subscribe(()=>this.loadTasks());break;case"closeTask":this.taskService.closeTask(e.id).subscribe(()=>this.loadTasks());break}}createTask(){this.router.navigate(["/tasks/new"])}canPerformAction(t,e){if(!this.currentUser)return!1;let i=this.currentUser.role;if(i==="Admin"||i==="Department Head")return!0;if(i==="Regular User"){let r=this.currentUser;return r.role==="Admin"||r.role==="Department Head"&&r.department===e.currentDepartment?!0:r.role==="Regular User"&&r.department===e.currentDepartment?!(t==="approveCredit"||t==="closeTask"):!1}return!1}static \u0275fac=function(e){return new(e||n)(D(ct),D(ve),D(_e))};static \u0275cmp=oe({type:n,selectors:[["app-kanban-board"]],decls:9,vars:1,consts:[[1,"container-fluid","py-4","bg-light","min-vh-100"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"h3","fw-bold","text-dark"],[1,"btn","btn-primary","shadow-sm",3,"click"],[1,"bi","bi-plus-lg","ms-1"],[1,"d-flex","overflow-auto","pb-4","gap-3"],["class","min-vw-25 bg-white rounded shadow-sm p-3 border","style","min-width: 300px;",4,"ngFor","ngForOf"],[1,"min-vw-25","bg-white","rounded","shadow-sm","p-3","border",2,"min-width","300px"],[1,"h6","fw-bold","text-secondary","mb-3","d-flex","justify-content-between","align-items-center"],[1,"badge","bg-light","text-dark","border"],[1,"d-flex","flex-column","gap-2"],[3,"task","currentUser","userMap","action",4,"ngFor","ngForOf"],[3,"action","task","currentUser","userMap"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"\u0646\u0638\u0627\u0645 \u062A\u062A\u0628\u0639 \u0627\u0644\u0645\u0647\u0627\u0645 (IDTTS)"),s(),o(4,"button",3),H("click",function(){return i.createTask()}),ke(5,"i",4),l(6," \u0637\u0644\u0628 \u062C\u062F\u064A\u062F (\u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A) "),s()(),o(7,"div",5),G(8,bo,7,3,"div",6),s()()),e&2&&(u(8),y("ngForOf",i.columns))},dependencies:[ce,Se,hn],encapsulation:2})};var pr=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(D(Bt),D(jt))};static \u0275dir=ye({type:n})}return n})(),Tn=(()=>{class n extends pr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=bt(n)))(r||n)}})();static \u0275dir=ye({type:n,features:[xe]})}return n})(),en=new Mt("");var Co={provide:en,useExisting:Je(()=>ze),multi:!0};function Eo(){let n=zn()?zn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ko=new Mt(""),ze=(()=>{class n extends pr{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Eo())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(D(Bt),D(jt),D(ko,8))};static \u0275dir=ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&H("input",function(_){return r._handleInput(_.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(_){return r._compositionEnd(_.target.value)})},standalone:!1,features:[Qe([Co]),xe]})}return n})();function Do(n){return n==null||To(n)===0}function To(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Sn=new Mt(""),fr=new Mt("");function So(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Mo(n){return Do(n.value)?{required:!0}:null}function rr(n){return null}function hr(n){return n!=null}function gr(n){return Ai(n)?Di(n):n}function _r(n){let t={};return n.forEach(e=>{t=e!=null?de(de({},t),e):t}),Object.keys(t).length===0?null:t}function vr(n,t){return t.map(e=>e(n))}function wo(n){return!n.validate}function yr(n){return n.map(t=>wo(t)?t:e=>t.validate(e))}function Ao(n){if(!n)return null;let t=n.filter(hr);return t.length==0?null:function(e){return _r(vr(e,t))}}function ci(n){return n!=null?Ao(yr(n)):null}function xo(n){if(!n)return null;let t=n.filter(hr);return t.length==0?null:function(e){let i=vr(e,t).map(gr);return Ti(i).pipe(Tt(_r))}}function di(n){return n!=null?xo(yr(n)):null}function or(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Vo(n){return n._rawValidators}function Io(n){return n._rawAsyncValidators}function li(n){return n?Array.isArray(n)?n:[n]:[]}function vn(n,t){return Array.isArray(n)?n.includes(t):n===t}function sr(n,t){let e=li(t);return li(n).forEach(r=>{vn(e,r)||e.push(r)}),e}function ar(n,t){return li(t).filter(e=>!vn(n,e))}var yn=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ci(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=di(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Ft=class extends yn{name;get formDirective(){return null}get path(){return null}},Qt=class extends yn{_parent=null;name=null;valueAccessor=null},bn=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var $e=(()=>{class n extends bn{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(D(Qt,2))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ct("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[xe]})}return n})(),ft=(()=>{class n extends bn{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(D(Ft,10))};static \u0275dir=ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ct("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[xe]})}return n})();var $t="VALID",_n="INVALID",Ot="PENDING",Xt="DISABLED",pt=class{},Cn=class extends pt{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Kt=class extends pt{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Jt=class extends pt{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Pt=class extends pt{status;source;constructor(t,e){super(),this.status=t,this.source=e}},ui=class extends pt{source;constructor(t){super(),this.source=t}},En=class extends pt{source;constructor(t){super(),this.source=t}};function br(n){return(Mn(n)?n.validators:n)||null}function Oo(n){return Array.isArray(n)?ci(n):n||null}function Cr(n,t){return(Mn(t)?t.asyncValidators:n)||null}function Po(n){return Array.isArray(n)?di(n):n||null}function Mn(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Fo(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new on(1e3,"");if(!i[e])throw new on(1001,"")}function No(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new on(1002,"")})}var kn=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ut(this.statusReactive)}set status(t){ut(()=>this.statusReactive.set(t))}_status=Gt(()=>this.statusReactive(),{});statusReactive=Lt(void 0,{});get valid(){return this.status===$t}get invalid(){return this.status===_n}get pending(){return this.status==Ot}get disabled(){return this.status===Xt}get enabled(){return this.status!==Xt}errors;get pristine(){return ut(this.pristineReactive)}set pristine(t){ut(()=>this.pristineReactive.set(t))}_pristine=Gt(()=>this.pristineReactive(),{});pristineReactive=Lt(!0,{});get dirty(){return!this.pristine}get touched(){return ut(this.touchedReactive)}set touched(t){ut(()=>this.touchedReactive.set(t))}_touched=Gt(()=>this.touchedReactive(),{});touchedReactive=Lt(!1,{});get untouched(){return!this.touched}_events=new Ei;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(sr(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(sr(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ar(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ar(t,this._rawAsyncValidators))}hasValidator(t){return vn(this._rawValidators,t)}hasAsyncValidator(t){return vn(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ae(de({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Jt(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Jt(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ae(de({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Kt(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Kt(!0,i))}markAsPending(t={}){this.status=Ot;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Pt(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ae(de({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Xt,this.errors=null,this._forEachChild(r=>{r.disable(Ae(de({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Cn(this.value,i)),this._events.next(new Pt(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ae(de({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=$t,this._forEachChild(i=>{i.enable(Ae(de({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ae(de({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$t||this.status===Ot)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Cn(this.value,e)),this._events.next(new Pt(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ae(de({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xt:$t}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Ot,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=gr(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Pt(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?Xt:this.errors?_n:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ot)?Ot:this._anyControlsHaveStatus(_n)?_n:$t}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Kt(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Jt(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Mn(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Oo(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Po(this._rawAsyncValidators)}},Dn=class extends kn{constructor(t,e,i){super(br(e),Cr(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){No(this,!0,t),Object.keys(t).forEach(i=>{Fo(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,Ae(de({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new En(this))}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var mi=new Mt("",{factory:()=>pi}),pi="always";function Ro(n,t){return[...t.path,n]}function Er(n,t,e=pi){kr(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Lo(n,t),Bo(n,t),jo(n,t),Uo(n,t)}function lr(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Uo(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function kr(n,t){let e=Vo(n);t.validator!==null?n.setValidators(or(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Io(n);t.asyncValidator!==null?n.setAsyncValidators(or(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();lr(t._rawValidators,r),lr(t._rawAsyncValidators,r)}function Lo(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Dr(n,t)})}function jo(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Dr(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Dr(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Bo(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Go(n,t){n==null,kr(n,t)}function Ho(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Wo(n){return Object.getPrototypeOf(n.constructor)===Tn}function Zo(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function qo(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(a=>{a.constructor===ze?e=a:Wo(a)?i=a:r=a}),r||i||e||null}var zo={provide:Ft,useExisting:Je(()=>st)},Yt=Promise.resolve(),st=(()=>{class n extends Ft{callSetDisabledState;get submitted(){return ut(this.submittedReactive)}_submitted=Gt(()=>this.submittedReactive(),{});submittedReactive=Lt(!1,{});_directives=new Set;form;ngSubmit=new yt;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new Dn({},ci(e),di(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Yt.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Er(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Yt.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Yt.then(()=>{let i=this._findContainer(e.path),r=new Dn({});Go(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Yt.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Yt.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Zo(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new ui(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(D(Sn,10),D(fr,10),D(mi,8))};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&H("submit",function(_){return r.onSubmit(_)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Qe([zo]),xe]})}return n})();function ur(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function cr(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var $o=class extends kn{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(br(e),Cr(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mn(e)&&(e.nonNullable||e.initialValueIsDefault)&&(cr(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new En(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ur(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ur(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){cr(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Xo={provide:Qt,useExisting:Je(()=>He)},dr=Promise.resolve(),He=(()=>{class n extends Qt{_changeDetectorRef;callSetDisabledState;control=new $o;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new yt;constructor(e,i,r,a,_,v){super(),this._changeDetectorRef=_,this.callSetDisabledState=v,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=qo(this,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Ho(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Er(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){dr.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&qn(i);dr.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Ro(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(D(Ft,9),D(Sn,10),D(fr,10),D(en,10),D(Zn,8),D(mi,8))};static \u0275dir=ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Qe([Xo]),xe,Gn]})}return n})();var ht=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Yo={provide:en,useExisting:Je(()=>fi),multi:!0},fi=(()=>{class n extends Tn{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=bt(n)))(r||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&H("input",function(_){return r.onChange(_.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Qe([Yo]),xe]})}return n})();var Ko={provide:en,useExisting:Je(()=>gt),multi:!0};function Tr(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Jo(n){return n.split(":")[0]}var gt=(()=>{class n extends Tn{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=sn(xi).injector;destroyRef=sn(Mi);cdr=sn(Zn);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,wi({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),r=Tr(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=Jo(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=bt(n)))(r||n)}})();static \u0275dir=ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&H("change",function(_){return r.onChange(_.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qe([Ko]),xe]})}return n})(),Nt=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Tr(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(D(jt),D(Bt),D(gt,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Qo={provide:en,useExisting:Je(()=>Sr),multi:!0};function mr(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function es(n){return n.split(":")[0]}var Sr=(()=>{class n extends Tn{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(a=>this._getOptionId(a));i=(a,_)=>{a._setSelected(r.indexOf(_.toString())>-1)}}else i=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],a=i.selectedOptions;if(a!==void 0){let _=a;for(let v=0;v<_.length;v++){let E=_[v],V=this._getOptionValue(E.value);r.push(V)}}else{let _=i.options;for(let v=0;v<_.length;v++){let E=_[v];if(E.selected){let V=this._getOptionValue(E.value);r.push(V)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=es(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=bt(n)))(r||n)}})();static \u0275dir=ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&H("change",function(_){return r.onChange(_.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qe([Qo]),xe]})}return n})(),Rt=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(mr(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(mr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(D(jt),D(Bt),D(Sr,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function ts(n){return typeof n=="number"?n:parseFloat(n)}var Mr=(()=>{class n{_validator=rr;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):rr,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ye({type:n,features:[Gn]})}return n})();var ns={provide:Sn,useExisting:Je(()=>hi),multi:!0},hi=(()=>{class n extends Mr{min;inputName="min";normalizeInput=e=>ts(e);createValidator=e=>So(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=bt(n)))(r||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Wn("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Qe([ns]),xe]})}return n})(),is={provide:Sn,useExisting:Je(()=>at),multi:!0};var at=(()=>{class n extends Mr{required;inputName="required";normalizeInput=qn;createValidator=e=>Mo;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=bt(n)))(r||n)}})();static \u0275dir=ye({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Wn("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Qe([is]),xe]})}return n})();var rs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Hn({type:n});static \u0275inj=Bn({})}return n})();var Xe=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:mi,useValue:e.callSetDisabledState??pi}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Hn({type:n});static \u0275inj=Bn({imports:[rs]})}return n})();function os(n,t){if(n&1&&(o(0,"div",13),l(1),s()),n&2){let e=N();u(),C(e.error)}}var wn=class n{constructor(t,e){this.userService=t;this.router=e}username="";password="";error="";isLoading=!1;login(){this.isLoading=!0,this.error="",this.userService.login(this.username,this.password).subscribe({next:()=>{this.router.navigate(["/"])},error:t=>{this.error="Invalid username or password",this.isLoading=!1}})}static \u0275fac=function(e){return new(e||n)(D(ve),D(_e))};static \u0275cmp=oe({type:n,selectors:[["app-login"]],decls:20,vars:5,consts:[[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","shadow","p-4",2,"max-width","400px","width","100%"],[1,"card-body"],[1,"card-title","text-center","mb-4"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"mt-3","text-center","text-muted","small"],[1,"alert","alert-danger"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),s(),G(5,os,2,1,"div",4),o(6,"form",5),H("ngSubmit",function(){return i.login()}),o(7,"div",6)(8,"label",7),l(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),s(),o(10,"input",8),he("ngModelChange",function(a){return fe(i.username,a)||(i.username=a),a}),s()(),o(11,"div",6)(12,"label",9),l(13,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),s(),o(14,"input",10),he("ngModelChange",function(a){return fe(i.password,a)||(i.password=a),a}),s()(),o(15,"button",11),l(16),s()(),o(17,"div",12)(18,"p"),l(19,"\u062C\u0631\u0628: admin / password"),s()()()()()),e&2&&(u(5),y("ngIf",i.error),u(5),pe("ngModel",i.username),u(4),pe("ngModel",i.password),u(),y("disabled",i.isLoading),u(),se(" ",i.isLoading?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...":"\u062F\u062E\u0648\u0644"," "))},dependencies:[ce,Oe,Xe,ht,ze,$e,ft,at,He,st],encapsulation:2})};var ss=n=>["/users",n];function as(n,t){if(n&1){let e=ue();o(0,"tr")(1,"td"),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td")(8,"a",8),l(9,"\u062A\u0639\u062F\u064A\u0644"),s(),o(10,"button",9),H("click",function(){let r=ie(e).$implicit,a=N();return re(a.deleteUser(r.id))}),l(11,"\u062D\u0630\u0641"),s()()()}if(n&2){let e=t.$implicit;u(2),C(e.username),u(2),C(e.role),u(2),C(e.department||"-"),u(2),y("routerLink",At(4,ss,e.id))}}var An=class n{constructor(t){this.userService=t}users=[];ngOnInit(){this.loadUsers()}loadUsers(){this.userService.getUsers().subscribe(t=>this.users=t)}deleteUser(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u061F")&&this.userService.deleteUser(t).subscribe(()=>this.loadUsers())}static \u0275fac=function(e){return new(e||n)(D(ve))};static \u0275cmp=oe({type:n,selectors:[["app-user-list"]],decls:21,vars:1,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["routerLink","/users/new",1,"btn","btn-primary"],[1,"card","shadow-sm"],[1,"card-body","p-0"],[1,"table","table-hover","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"routerLink"],[1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646"),s(),o(4,"a",2),l(5,"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u062E\u062F\u0645"),s()(),o(6,"div",3)(7,"div",4)(8,"table",5)(9,"thead",6)(10,"tr")(11,"th"),l(12,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),s(),o(13,"th"),l(14,"\u0627\u0644\u062F\u0648\u0631"),s(),o(15,"th"),l(16,"\u0627\u0644\u0642\u0633\u0645"),s(),o(17,"th"),l(18,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),s()()(),o(19,"tbody"),G(20,as,12,6,"tr",7),s()()()()()),e&2&&(u(20),y("ngForOf",i.users))},dependencies:[ce,Se,be,Me],encapsulation:2})};function ls(n,t){n&1&&(o(0,"small",19),l(1,"\u0627\u062A\u0631\u0643\u0647 \u0641\u0627\u0631\u063A\u0627\u064B \u0644\u0644\u0625\u0628\u0642\u0627\u0621 \u0639\u0644\u0649 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629"),s())}function us(n,t){if(n&1&&(o(0,"option",20),l(1),s()),n&2){let e=t.$implicit;y("value",e),u(),C(e)}}function cs(n,t){if(n&1&&(o(0,"option",20),l(1),s()),n&2){let e=t.$implicit;y("value",e.id),u(),C(e.name)}}function ds(n,t){if(n&1){let e=ue();o(0,"div",6)(1,"label",21),l(2,"\u0627\u0644\u0642\u0633\u0645"),s(),o(3,"select",22),he("ngModelChange",function(r){ie(e);let a=N();return fe(a.user.department,r)||(a.user.department=r),re(r)}),G(4,cs,2,2,"option",14),s()()}if(n&2){let e=N();u(3),pe("ngModel",e.user.department),u(),y("ngForOf",e.departments)}}var xn=class n{constructor(t,e,i,r){this.userService=t;this.departmentService=e;this.route=i;this.router=r}user={role:"Regular User"};departments=[];roles=Object.values(rt);isEditMode=!1;isLoading=!1;ngOnInit(){this.departmentService.getDepartments().subscribe(e=>this.departments=e);let t=this.route.snapshot.paramMap.get("id");t&&t!=="new"&&(this.isEditMode=!0,this.userService.getUsers().subscribe(e=>{let i=e.find(r=>r.id===t);i&&(this.user=de({},i))}))}save(){this.isLoading=!0,this.isEditMode&&this.user.id?this.userService.updateUser(this.user.id,this.user).subscribe(()=>{this.router.navigate(["/users"])}):this.userService.createUser(this.user).subscribe(()=>{this.router.navigate(["/users"])})}static \u0275fac=function(e){return new(e||n)(D(ve),D(dt),D(Vt),D(_e))};static \u0275cmp=oe({type:n,selectors:[["app-user-form"]],decls:27,vars:10,consts:[[1,"container","mt-4"],[1,"card","shadow-sm",2,"max-width","600px","margin","0 auto"],[1,"card-header","bg-white"],[1,"card-title","mb-0"],[1,"card-body"],[3,"ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password",1,"form-control",3,"ngModelChange","ngModel","required"],["class","text-muted",4,"ngIf"],["for","role",1,"form-label"],["id","role","name","role","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"d-flex","justify-content-end","gap-2"],["routerLink","/users",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-muted"],[3,"value"],["for","department",1,"form-label"],["id","department","name","department","required","",1,"form-select",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4),s()(),o(5,"div",4)(6,"form",5),H("ngSubmit",function(){return i.save()}),o(7,"div",6)(8,"label",7),l(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),s(),o(10,"input",8),he("ngModelChange",function(a){return fe(i.user.username,a)||(i.user.username=a),a}),s()(),o(11,"div",6)(12,"label",9),l(13,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),s(),o(14,"input",10),he("ngModelChange",function(a){return fe(i.user.password,a)||(i.user.password=a),a}),s(),G(15,ls,2,0,"small",11),s(),o(16,"div",6)(17,"label",12),l(18,"\u0627\u0644\u062F\u0648\u0631"),s(),o(19,"select",13),he("ngModelChange",function(a){return fe(i.user.role,a)||(i.user.role=a),a}),G(20,us,2,2,"option",14),s()(),G(21,ds,5,2,"div",15),o(22,"div",16)(23,"a",17),l(24,"\u0625\u0644\u063A\u0627\u0621"),s(),o(25,"button",18),l(26),s()()()()()()),e&2&&(u(4),C(i.isEditMode?"\u062A\u0639\u062F\u064A\u0644 \u0645\u0633\u062A\u062E\u062F\u0645":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u062E\u062F\u0645"),u(6),pe("ngModel",i.user.username),u(4),pe("ngModel",i.user.password),y("required",!i.isEditMode),u(),y("ngIf",i.isEditMode),u(4),pe("ngModel",i.user.role),u(),y("ngForOf",i.roles),u(),y("ngIf",i.user.role!=="Admin"),u(4),y("disabled",i.isLoading),u(),se(" ",i.isLoading?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u062D\u0641\u0638"," "))},dependencies:[ce,Se,Oe,Xe,ht,Nt,Rt,ze,gt,$e,ft,at,He,st,be,Me],encapsulation:2})};var ms=n=>["/departments",n];function ps(n,t){if(n&1){let e=ue();o(0,"tr")(1,"td"),l(2),s(),o(3,"td")(4,"a",8),l(5,"\u062A\u0639\u062F\u064A\u0644"),s(),o(6,"button",9),H("click",function(){let r=ie(e).$implicit,a=N();return re(a.deleteDepartment(r.id))}),l(7,"\u062D\u0630\u0641"),s()()()}if(n&2){let e=t.$implicit;u(2),C(e.name),u(2),y("routerLink",At(2,ms,e.id))}}var Vn=class n{constructor(t){this.departmentService=t}departments=[];ngOnInit(){this.loadDepartments()}loadDepartments(){this.departmentService.getDepartments().subscribe(t=>this.departments=t)}deleteDepartment(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0642\u0633\u0645\u061F")&&this.departmentService.deleteDepartment(t).subscribe(()=>this.loadDepartments())}static \u0275fac=function(e){return new(e||n)(D(dt))};static \u0275cmp=oe({type:n,selectors:[["app-department-list"]],decls:17,vars:1,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["routerLink","/departments/new",1,"btn","btn-primary"],[1,"card","shadow-sm"],[1,"card-body","p-0"],[1,"table","table-hover","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"routerLink"],[1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0642\u0633\u0627\u0645"),s(),o(4,"a",2),l(5,"\u0625\u0636\u0627\u0641\u0629 \u0642\u0633\u0645"),s()(),o(6,"div",3)(7,"div",4)(8,"table",5)(9,"thead",6)(10,"tr")(11,"th"),l(12,"\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"),s(),o(13,"th"),l(14,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),s()()(),o(15,"tbody"),G(16,ps,8,4,"tr",7),s()()()()()),e&2&&(u(16),y("ngForOf",i.departments))},dependencies:[ce,Se,be,Me],encapsulation:2})};var In=class n{constructor(t,e,i){this.departmentService=t;this.route=e;this.router=i}department={};isEditMode=!1;isLoading=!1;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&t!=="new"&&(this.isEditMode=!0,this.departmentService.getDepartments().subscribe(e=>{let i=e.find(r=>r.id===t);i&&(this.department=de({},i))}))}save(){this.isLoading=!0,this.isEditMode&&this.department.id?this.departmentService.updateDepartment(this.department.id,this.department).subscribe(()=>{this.router.navigate(["/departments"])}):this.departmentService.createDepartment(this.department).subscribe(()=>{this.router.navigate(["/departments"])})}static \u0275fac=function(e){return new(e||n)(D(dt),D(Vt),D(_e))};static \u0275cmp=oe({type:n,selectors:[["app-department-form"]],decls:16,vars:4,consts:[[1,"container","mt-4"],[1,"card","shadow-sm",2,"max-width","600px","margin","0 auto"],[1,"card-header","bg-white"],[1,"card-title","mb-0"],[1,"card-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","gap-2"],["routerLink","/departments",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4),s()(),o(5,"div",4)(6,"form",5),H("ngSubmit",function(){return i.save()}),o(7,"div",6)(8,"label",7),l(9,"\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645"),s(),o(10,"input",8),he("ngModelChange",function(a){return fe(i.department.name,a)||(i.department.name=a),a}),s()(),o(11,"div",9)(12,"a",10),l(13,"\u0625\u0644\u063A\u0627\u0621"),s(),o(14,"button",11),l(15),s()()()()()()),e&2&&(u(4),C(i.isEditMode?"\u062A\u0639\u062F\u064A\u0644 \u0642\u0633\u0645":"\u0625\u0636\u0627\u0641\u0629 \u0642\u0633\u0645"),u(6),pe("ngModel",i.department.name),u(4),y("disabled",i.isLoading),u(),se(" ",i.isLoading?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u062D\u0641\u0638"," "))},dependencies:[ce,Xe,ht,ze,$e,ft,at,He,st,be,Me],encapsulation:2})};function fs(n,t){if(n&1&&(o(0,"option",23),l(1),s()),n&2){let e=t.$implicit;y("value",e),u(),C(e)}}function hs(n,t){if(n&1&&(o(0,"option",23),l(1),s()),n&2){let e=t.$implicit;y("value",e.name),u(),C(e.name)}}var On=class n{constructor(t,e,i){this.taskService=t;this.departmentService=e;this.router=i}task={priority:"Medium",plannedTime:5};priorities=Object.values(Ht);departments=[];isLoading=!1;ngOnInit(){this.departmentService.getDepartments().subscribe(t=>{this.departments=t,this.departments.length>0&&(this.task.currentDepartment=this.departments[0].name)})}save(){this.isLoading=!0,this.taskService.createTask(this.task).subscribe(()=>{this.router.navigate(["/"])})}static \u0275fac=function(e){return new(e||n)(D(ct),D(dt),D(_e))};static \u0275cmp=oe({type:n,selectors:[["app-task-form"]],decls:38,vars:10,consts:[[1,"container","mt-4"],[1,"card","shadow-sm",2,"max-width","600px","margin","0 auto"],[1,"card-header","bg-white"],[1,"card-title","mb-0"],[1,"card-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","name","description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["for","requestingParty",1,"form-label"],["type","text","id","requestingParty","name","requestingParty","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","priority",1,"form-label"],["id","priority","name","priority","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","department",1,"form-label"],["id","department","name","department","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","plannedTime",1,"form-label"],["type","number","id","plannedTime","name","plannedTime","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","gap-2"],["routerLink","/",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4,"\u0625\u0636\u0627\u0641\u0629 \u0645\u0647\u0645\u0629 \u062C\u062F\u064A\u062F\u0629"),s()(),o(5,"div",4)(6,"form",5),H("ngSubmit",function(){return i.save()}),o(7,"div",6)(8,"label",7),l(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0647\u0645\u0629"),s(),o(10,"input",8),he("ngModelChange",function(a){return fe(i.task.name,a)||(i.task.name=a),a}),s()(),o(11,"div",6)(12,"label",9),l(13,"\u0627\u0644\u0648\u0635\u0641"),s(),o(14,"textarea",10),he("ngModelChange",function(a){return fe(i.task.description,a)||(i.task.description=a),a}),s()(),o(15,"div",6)(16,"label",11),l(17,"\u0627\u0644\u062C\u0647\u0629 \u0627\u0644\u0637\u0627\u0644\u0628\u0629"),s(),o(18,"input",12),he("ngModelChange",function(a){return fe(i.task.requestingParty,a)||(i.task.requestingParty=a),a}),s()(),o(19,"div",6)(20,"label",13),l(21,"\u0627\u0644\u0623\u0648\u0644\u0648\u064A\u0629"),s(),o(22,"select",14),he("ngModelChange",function(a){return fe(i.task.priority,a)||(i.task.priority=a),a}),G(23,fs,2,2,"option",15),s()(),o(24,"div",6)(25,"label",16),l(26,"\u0627\u0644\u0642\u0633\u0645"),s(),o(27,"select",17),he("ngModelChange",function(a){return fe(i.task.currentDepartment,a)||(i.task.currentDepartment=a),a}),G(28,hs,2,2,"option",15),s()(),o(29,"div",6)(30,"label",18),l(31,"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062E\u0637\u0637 (\u0628\u0627\u0644\u0623\u064A\u0627\u0645)"),s(),o(32,"input",19),he("ngModelChange",function(a){return fe(i.task.plannedTime,a)||(i.task.plannedTime=a),a}),s()(),o(33,"div",20)(34,"a",21),l(35,"\u0625\u0644\u063A\u0627\u0621"),s(),o(36,"button",22),l(37),s()()()()()()),e&2&&(u(10),pe("ngModel",i.task.name),u(4),pe("ngModel",i.task.description),u(4),pe("ngModel",i.task.requestingParty),u(4),pe("ngModel",i.task.priority),u(),y("ngForOf",i.priorities),u(4),pe("ngModel",i.task.currentDepartment),u(),y("ngForOf",i.departments),u(4),pe("ngModel",i.task.plannedTime),u(4),y("disabled",i.isLoading),u(),se(" ",i.isLoading?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u062D\u0641\u0638"," "))},dependencies:[ce,Se,Xe,ht,Nt,Rt,ze,fi,gt,$e,ft,at,hi,He,st,be,Me],encapsulation:2})};var gs=(n,t,e)=>({"bg-danger":n,"bg-warning":t,"bg-success":e});function _s(n,t){if(n&1&&(o(0,"option",28),l(1),s()),n&2){let e=t.$implicit;y("value",e.id),u(),C(e.username)}}function vs(n,t){n&1&&(o(0,"div",29),l(1,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0633\u062C\u0644 \u0639\u0645\u0644\u064A\u0627\u062A"),s())}function ys(n,t){if(n&1&&(o(0,"li",32)(1,"div",26)(2,"strong"),l(3),s(),o(4,"span",33),l(5),Ve(6,"date"),s()(),o(7,"div",34),l(8),s()()),n&2){let e=t.$implicit,i=N(3);u(3),C(e.action),u(2),C(Ie(6,4,e.timestamp,"medium")),u(3),ln(" \u0627\u0644\u0642\u0633\u0645: ",e.department," | \u0627\u0644\u062D\u0627\u0644\u0629: ",i.statusMap[e.status]," ")}}function bs(n,t){if(n&1&&(o(0,"ul",30),G(1,ys,9,7,"li",31),s()),n&2){let e=N(2);u(),y("ngForOf",e.task.flowLog)}}function Cs(n,t){if(n&1&&(o(0,"div",35)(1,"div",36)(2,"h5",37),l(3,"\u26A0\uFE0F \u0639\u0642\u0628\u0629"),s(),o(4,"p",38),l(5),s()()()),n&2){let e=N(2);u(5),C(e.task.obstacle)}}function Es(n,t){if(n&1){let e=ue();o(0,"div",1)(1,"div",2)(2,"h2"),l(3),s(),o(4,"button",3),H("click",function(){ie(e);let r=N();return re(r.goBack())}),l(5,"\u0639\u0648\u062F\u0629"),s()(),o(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h5",8),l(11,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),s(),ke(12,"hr"),o(13,"div",9)(14,"div",10)(15,"strong"),l(16,"\u0627\u0644\u0648\u0635\u0641:"),s(),o(17,"p",11),l(18),s()(),o(19,"div",10)(20,"strong"),l(21,"\u0627\u0644\u062C\u0647\u0629 \u0627\u0644\u0637\u0627\u0644\u0628\u0629:"),s(),o(22,"p",11),l(23),s()()(),o(24,"div",9)(25,"div",12)(26,"strong"),l(27,"\u0627\u0644\u062D\u0627\u0644\u0629:"),s(),o(28,"span",13),l(29),s()(),o(30,"div",12)(31,"strong"),l(32,"\u0627\u0644\u0623\u0648\u0644\u0648\u064A\u0629:"),s(),o(33,"span",14),l(34),s()(),o(35,"div",12)(36,"strong"),l(37,"\u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u064A:"),s(),o(38,"span",15),l(39),s()()(),o(40,"div",9)(41,"div",10)(42,"strong"),l(43,"\u062A\u0639\u064A\u064A\u0646 \u0625\u0644\u0649:"),s(),o(44,"div",16)(45,"select",17),he("ngModelChange",function(r){ie(e);let a=N();return fe(a.selectedUserId,r)||(a.selectedUserId=r),re(r)}),o(46,"option",18),l(47,"\u0627\u062E\u062A\u0631 \u0645\u0633\u062A\u062E\u062F\u0645"),s(),G(48,_s,2,2,"option",19),s(),o(49,"button",20),H("click",function(){ie(e);let r=N();return re(r.assignTask())}),l(50,"\u062D\u0641\u0638"),s()()()(),o(51,"div",4)(52,"div",12)(53,"strong"),l(54,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0646\u0634\u0627\u0621:"),s(),o(55,"p",11),l(56),Ve(57,"date"),s()(),o(58,"div",12)(59,"strong"),l(60,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0621:"),s(),o(61,"p",11),l(62),Ve(63,"date"),s()(),o(64,"div",12)(65,"strong"),l(66,"\u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B:"),s(),o(67,"p",11),l(68),Ve(69,"date"),s()()()()(),o(70,"div",21)(71,"div",7)(72,"h5",8),l(73,"\u0633\u062C\u0644 \u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A (History)"),s(),ke(74,"hr"),G(75,vs,2,0,"div",22)(76,bs,2,1,"ul",23),s()()(),o(77,"div",12)(78,"div",24)(79,"div",7)(80,"h5",8),l(81,"\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A \u0627\u0644\u0648\u0642\u062A"),s(),ke(82,"hr"),o(83,"div",25)(84,"span"),l(85,"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062E\u0637\u0637:"),s(),o(86,"strong"),l(87),s()(),o(88,"div",26)(89,"span"),l(90,"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0641\u0639\u0644\u064A:"),s(),o(91,"strong"),l(92),s()()()(),G(93,Cs,6,1,"div",27),s()()()}if(n&2){let e=N();u(3),se("\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0645\u0647\u0645\u0629: ",e.task.name),u(15),C(e.task.description||"\u0644\u0627 \u064A\u0648\u062C\u062F \u0648\u0635\u0641"),u(5),C(e.task.requestingParty),u(6),C(e.statusMap[e.task.status]),u(4),y("ngClass",Ii(29,gs,e.task.priority==="High",e.task.priority==="Medium",e.task.priority==="Low")),u(),C(e.priorityMap[e.task.priority]),u(5),C(e.task.currentDepartment),u(6),pe("ngModel",e.selectedUserId),u(3),y("ngForOf",e.users),u(),y("disabled",!e.selectedUserId),u(7),C(Ie(57,20,e.task.createdAt,"medium")),u(6),C(e.task.startDate?Ie(63,23,e.task.startDate,"medium"):"-"),u(6),C(Ie(69,26,e.task.updatedAt,"medium")),u(7),y("ngIf",e.task.flowLog.length===0),u(),y("ngIf",e.task.flowLog.length>0),u(11),se("",e.task.plannedTime," \u064A\u0648\u0645"),u(4),Ct("text-danger",e.task.actualTime>e.task.plannedTime),u(),se("",e.task.actualTime," \u064A\u0648\u0645"),u(),y("ngIf",e.task.obstacle)}}var Pn=class n{constructor(t,e,i,r){this.route=t;this.taskService=e;this.userService=i;this.location=r}task=null;priorityMap={High:"\u0639\u0627\u0644\u064A\u0629",Medium:"\u0645\u062A\u0648\u0633\u0637\u0629",Low:"\u0645\u0646\u062E\u0641\u0636\u0629"};statusMap={New:"\u062C\u062F\u064A\u062F","Under Review":"\u0642\u064A\u062F \u0627\u0644\u0645\u0631\u0627\u062C\u0639\u0629","Awaiting Approval":"\u0628\u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629","In Progress":"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630","Blocked by Obstacle":"\u0645\u062A\u0648\u0642\u0641 (\u0639\u0642\u0628\u0629)",Completed:"\u0645\u0643\u062A\u0645\u0644",Closed:"\u0645\u063A\u0644\u0642"};users=[];selectedUserId="";ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.taskService.getTasks().subscribe(e=>{this.task=e.find(i=>i.id===t)||null,this.task&&this.task.assignedTo&&(this.selectedUserId=this.task.assignedTo)}),this.userService.getUsers().subscribe(e=>{this.users=e})}assignTask(){this.task&&this.selectedUserId&&this.taskService.assignTask(this.task.id,this.selectedUserId).subscribe(t=>{this.task=t,alert("\u062A\u0645 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0645\u0647\u0645\u0629 \u0628\u0646\u062C\u0627\u062D")})}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||n)(D(Vt),D(ct),D(ve),D(Pi))};static \u0275cmp=oe({type:n,selectors:[["app-task-detail"]],decls:1,vars:1,consts:[["class","container mt-4",4,"ngIf"],[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"btn","btn-outline-secondary",3,"click"],[1,"row"],[1,"col-md-8"],[1,"card","mb-4","shadow-sm"],[1,"card-body"],[1,"card-title","text-primary"],[1,"row","mb-3"],[1,"col-md-6"],[1,"text-muted"],[1,"col-md-4"],[1,"badge","bg-info","text-dark"],[1,"badge",3,"ngClass"],[1,"badge","bg-secondary"],[1,"input-group"],[1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"card","shadow-sm"],["class","text-muted text-center",4,"ngIf"],["class","list-group list-group-flush",4,"ngIf"],[1,"card","shadow-sm","mb-4"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-flex","justify-content-between"],["class","card shadow-sm border-danger",4,"ngIf"],[3,"value"],[1,"text-muted","text-center"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"text-muted","small"],[1,"small","text-muted"],[1,"card","shadow-sm","border-danger"],[1,"card-body","text-danger"],[1,"card-title"],[1,"card-text"]],template:function(e,i){e&1&&G(0,Es,94,33,"div",0),e&2&&y("ngIf",i.task)},dependencies:[ce,un,Se,Oe,be,Xe,Nt,Rt,gt,$e,He,xt],encapsulation:2})};var Re=class n{constructor(t,e){this.userService=t;this.router=e}canActivate(){return this.userService.currentUser$.pipe(rn(1),Tt(t=>t?!0:this.router.createUrlTree(["/login"])))}static \u0275fac=function(e){return new(e||n)(wt(ve),wt(_e))};static \u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Et=class n{constructor(t,e){this.userService=t;this.router=e}canActivate(t){let e=t.data.roles;return this.userService.currentUser$.pipe(rn(1),Tt(i=>i&&e.includes(i.role)?!0:this.router.createUrlTree(["/"])))}static \u0275fac=function(e){return new(e||n)(wt(ve),wt(_e))};static \u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"root"})};function ks(n,t){n&1&&(o(0,"div",5),ke(1,"div",6),o(2,"p"),l(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A..."),s()())}function Ds(n,t){if(n&1){let e=ue();o(0,"div",19),H("click",function(){let r=ie(e).$implicit,a=N(2);return re(a.viewTaskDetails(r.id))}),o(1,"div",20)(2,"span",21),l(3),s(),o(4,"span",22),l(5),s()(),o(6,"h3"),l(7),s(),o(8,"p",23),l(9),s(),o(10,"div",24)(11,"span",25),l(12),s(),o(13,"span",26),l(14),Ve(15,"date"),s()()()}if(n&2){let e=t.$implicit,i=N(2);u(3),se("#",e.id),u(2),C(i.getArabicStatus(e.status)),u(2),C(e.name),u(2),C(e.description),u(3),C(i.getArabicDepartment(e.currentDepartment)),u(2),C(Ie(15,6,e.createdAt,"shortDate"))}}function Ts(n,t){n&1&&(o(0,"div",27),l(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0647\u0627\u0645 \u0630\u0627\u062A \u0623\u0648\u0644\u0648\u064A\u0629 \u0639\u0627\u0644\u064A\u0629. "),s())}function Ss(n,t){if(n&1){let e=ue();o(0,"div",19),H("click",function(){let r=ie(e).$implicit,a=N(2);return re(a.viewTaskDetails(r.id))}),o(1,"div",20)(2,"span",21),l(3),s(),o(4,"span",22),l(5),s()(),o(6,"h3"),l(7),s(),o(8,"p",23),l(9),s(),o(10,"div",24)(11,"span",25),l(12),s(),o(13,"span",26),l(14),Ve(15,"date"),s()()()}if(n&2){let e=t.$implicit,i=N(2);u(3),se("#",e.id),u(2),C(i.getArabicStatus(e.status)),u(2),C(e.name),u(2),C(e.description),u(3),C(i.getArabicDepartment(e.currentDepartment)),u(2),C(Ie(15,6,e.createdAt,"shortDate"))}}function Ms(n,t){n&1&&(o(0,"div",27),l(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0647\u0627\u0645 \u0630\u0627\u062A \u0623\u0648\u0644\u0648\u064A\u0629 \u0645\u062A\u0648\u0633\u0637\u0629. "),s())}function ws(n,t){if(n&1){let e=ue();o(0,"div",19),H("click",function(){let r=ie(e).$implicit,a=N(2);return re(a.viewTaskDetails(r.id))}),o(1,"div",20)(2,"span",21),l(3),s(),o(4,"span",22),l(5),s()(),o(6,"h3"),l(7),s(),o(8,"p",23),l(9),s(),o(10,"div",24)(11,"span",25),l(12),s(),o(13,"span",26),l(14),Ve(15,"date"),s()()()}if(n&2){let e=t.$implicit,i=N(2);u(3),se("#",e.id),u(2),C(i.getArabicStatus(e.status)),u(2),C(e.name),u(2),C(e.description),u(3),C(i.getArabicDepartment(e.currentDepartment)),u(2),C(Ie(15,6,e.createdAt,"shortDate"))}}function As(n,t){n&1&&(o(0,"div",27),l(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0647\u0627\u0645 \u0630\u0627\u062A \u0623\u0648\u0644\u0648\u064A\u0629 \u0645\u0646\u062E\u0641\u0636\u0629. "),s())}function xs(n,t){if(n&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h2"),l(5,"\u0623\u0648\u0644\u0648\u064A\u0629 \u0639\u0627\u0644\u064A\u0629"),s(),o(6,"span",11),l(7),s()(),o(8,"div",12),ke(9,"div",13),s()(),o(10,"div",14),G(11,Ds,16,9,"div",15)(12,Ts,2,0,"div",16),s()(),o(13,"div",17)(14,"div",9)(15,"div",10)(16,"h2"),l(17,"\u0623\u0648\u0644\u0648\u064A\u0629 \u0645\u062A\u0648\u0633\u0637\u0629"),s(),o(18,"span",11),l(19),s()(),o(20,"div",12),ke(21,"div",13),s()(),o(22,"div",14),G(23,Ss,16,9,"div",15)(24,Ms,2,0,"div",16),s()(),o(25,"div",18)(26,"div",9)(27,"div",10)(28,"h2"),l(29,"\u0623\u0648\u0644\u0648\u064A\u0629 \u0645\u0646\u062E\u0641\u0636\u0629"),s(),o(30,"span",11),l(31),s()(),o(32,"div",12),ke(33,"div",13),s()(),o(34,"div",14),G(35,ws,16,9,"div",15)(36,As,2,0,"div",16),s()()()),n&2){let e=N();u(7),C(e.highPriorityTasks.length),u(2),an("width",e.highPriorityTasks.length/e.tasks.length*100,"%"),u(2),y("ngForOf",e.highPriorityTasks),u(),y("ngIf",e.highPriorityTasks.length===0),u(7),C(e.mediumPriorityTasks.length),u(2),an("width",e.mediumPriorityTasks.length/e.tasks.length*100,"%"),u(2),y("ngForOf",e.mediumPriorityTasks),u(),y("ngIf",e.mediumPriorityTasks.length===0),u(7),C(e.lowPriorityTasks.length),u(2),an("width",e.lowPriorityTasks.length/e.tasks.length*100,"%"),u(2),y("ngForOf",e.lowPriorityTasks),u(),y("ngIf",e.lowPriorityTasks.length===0)}}var Fn=class n{constructor(t,e){this.taskService=t;this.router=e}tasks=[];highPriorityTasks=[];mediumPriorityTasks=[];lowPriorityTasks=[];isLoading=!0;ngOnInit(){this.loadTasks()}loadTasks(){this.taskService.getTasks().subscribe({next:t=>{this.tasks=t,this.groupTasksByPriority(),this.isLoading=!1},error:t=>{console.error("Error loading tasks",t),this.isLoading=!1}})}groupTasksByPriority(){let t=(e,i)=>new Date(i.createdAt).getTime()-new Date(e.createdAt).getTime();this.highPriorityTasks=this.tasks.filter(e=>e.priority==="High").sort(t),this.mediumPriorityTasks=this.tasks.filter(e=>e.priority==="Medium").sort(t),this.lowPriorityTasks=this.tasks.filter(e=>e.priority==="Low").sort(t)}getArabicStatus(t){return{New:"\u062C\u062F\u064A\u062F","Under Review":"\u0642\u064A\u062F \u0627\u0644\u0645\u0631\u0627\u062C\u0639\u0629","Awaiting Approval":"\u0628\u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629","In Progress":"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630","Blocked by Obstacle":"\u0645\u062A\u0648\u0642\u0641 \u0644\u0648\u062C\u0648\u062F \u0639\u0642\u0628\u0629",Completed:"\u0645\u0643\u062A\u0645\u0644",Closed:"\u0645\u063A\u0644\u0642"}[t]||t}getArabicDepartment(t){return{Sales:"\u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A",Accounts:"\u0627\u0644\u062D\u0633\u0627\u0628\u0627\u062A",Production:"\u0627\u0644\u0625\u0646\u062A\u0627\u062C",Purchasing:"\u0627\u0644\u0645\u0634\u062A\u0631\u064A\u0627\u062A",Management:"\u0627\u0644\u0625\u062F\u0627\u0631\u0629",Marketing:"\u0627\u0644\u062A\u0633\u0648\u064A\u0642"}[t]||t}viewTaskDetails(t){this.router.navigate(["/tasks",t])}static \u0275fac=function(e){return new(e||n)(D(ct),D(_e))};static \u0275cmp=oe({type:n,selectors:[["app-c-level-dashboard"]],decls:8,vars:2,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"subtitle"],["class","loading-state",4,"ngIf"],["class","dashboard-grid",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"dashboard-grid"],[1,"priority-column","high-priority"],[1,"column-header"],[1,"header-content"],[1,"badge"],[1,"progress-bar"],[1,"progress"],[1,"task-list"],["class","task-card",3,"click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"priority-column","medium-priority"],[1,"priority-column","low-priority"],[1,"task-card",3,"click"],[1,"task-header"],[1,"task-id"],[1,"task-status"],[1,"task-desc"],[1,"task-footer"],[1,"department"],[1,"date"],[1,"empty-state"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"header",1)(2,"h1"),l(3,"\u0644\u0648\u062D\u0629 \u0627\u0644\u0642\u064A\u0627\u062F\u0629 \u0627\u0644\u062A\u0646\u0641\u064A\u0630\u064A\u0629"),s(),o(4,"p",2),l(5,"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u0647\u0627\u0645 \u062D\u0633\u0628 \u0627\u0644\u0623\u0648\u0644\u0648\u064A\u0629"),s()(),G(6,ks,4,0,"div",3)(7,xs,37,15,"div",4),s()),e&2&&(u(6),y("ngIf",i.isLoading),u(),y("ngIf",!i.isLoading))},dependencies:[ce,Se,Oe,xt],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-color:#f8f9fa;padding:2rem;font-family:Inter,sans-serif}.dashboard-container[_ngcontent-%COMP%]{max-width:1600px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:3rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1a1a1a;margin:0;letter-spacing:-.02em}.subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1.1rem;margin-top:.5rem}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem}.priority-column[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 4px 20px #0000000d;display:flex;flex-direction:column;height:calc(100vh - 200px);min-height:600px}.column-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #f0f0f0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.column-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#2d3436}.badge[_ngcontent-%COMP%]{background:#f1f3f5;color:#495057;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:600}.progress-bar[_ngcontent-%COMP%]{height:4px;background:#f1f3f5;border-radius:2px;overflow:hidden}.progress[_ngcontent-%COMP%]{height:100%;border-radius:2px;transition:width .3s ease}.high-priority[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e03131}.high-priority[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#fff5f5;color:#e03131}.high-priority[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:#e03131}.high-priority[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{border-right:4px solid #e03131}.medium-priority[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f59f00}.medium-priority[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#fff9db;color:#f59f00}.medium-priority[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:#f59f00}.medium-priority[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{border-right:4px solid #f59f00}.low-priority[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2f9e44}.low-priority[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#ebfbee;color:#2f9e44}.low-priority[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:#2f9e44}.low-priority[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{border-right:4px solid #2f9e44}.task-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-left:.5rem}.task-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.task-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.task-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#e9ecef;border-radius:3px}.task-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9ecef;border-radius:8px;padding:1.25rem;margin-bottom:1rem;transition:transform .2s ease,box-shadow .2s ease;cursor:pointer}.task-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000000d}.task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.task-id[_ngcontent-%COMP%]{font-size:.75rem;color:#adb5bd;font-weight:500}.task-status[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;font-weight:600;color:#868e96}.task-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#343a40;margin:0 0 .5rem;line-height:1.4}.task-desc[_ngcontent-%COMP%]{font-size:.875rem;color:#868e96;margin:0 0 1rem;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.task-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:.75rem;border-top:1px solid #f8f9fa;font-size:.75rem;color:#adb5bd}.department[_ngcontent-%COMP%]{font-weight:500;color:#495057}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;color:#adb5bd}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f1f3f5;border-top-color:#228be6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#adb5bd;font-style:italic}"]})};var wr=[{path:"login",component:wn},{path:"dashboard",component:Fn,canActivate:[Re]},{path:"users",component:An,canActivate:[Re,Et],data:{roles:["Admin"]}},{path:"users/:id",component:xn,canActivate:[Re,Et],data:{roles:["Admin"]}},{path:"departments",component:Vn,canActivate:[Re,Et],data:{roles:["Admin"]}},{path:"departments/:id",component:In,canActivate:[Re,Et],data:{roles:["Admin"]}},{path:"tasks/new",component:On,canActivate:[Re]},{path:"tasks/:id",component:Pn,canActivate:[Re]},{path:"reporting",loadComponent:()=>import("./chunk-BLTLFGTZ.js").then(n=>n.ReportingDashboardComponent),canActivate:[Re]},{path:"",component:gn,canActivate:[Re]},{path:"**",redirectTo:""}];var Ar={providers:[Oi({eventCoalescing:!0}),Li(wr),Ni()]};var Vs=()=>({exact:!0});function Is(n,t){n&1&&(o(0,"li",8)(1,"a",15),l(2,"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646"),s()())}function Os(n,t){n&1&&(o(0,"li",8)(1,"a",16),l(2,"\u0627\u0644\u0623\u0642\u0633\u0627\u0645"),s()())}function Ps(n,t){n&1&&(o(0,"li",8)(1,"a",17),l(2,"\u0644\u0648\u062D\u0629 \u0627\u0644\u0642\u064A\u0627\u062F\u0629"),s()())}function Fs(n,t){if(n&1){let e=ue();o(0,"nav",1)(1,"div",2)(2,"a",3),l(3,"\u0646\u0638\u0627\u0645 \u062A\u062A\u0628\u0639 \u0627\u0644\u0645\u0647\u0627\u0645"),s(),o(4,"button",4),ke(5,"span",5),s(),o(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),l(10,"\u0627\u0644\u0645\u0647\u0627\u0645"),s()(),G(11,Is,3,0,"li",10)(12,Os,3,0,"li",10)(13,Ps,3,0,"li",10),o(14,"li",8)(15,"a",11),l(16,"\u0627\u0644\u062A\u0642\u0627\u0631\u064A\u0631"),s()()(),o(17,"div",12)(18,"span",13),l(19),s(),o(20,"button",14),H("click",function(){ie(e);let r=N();return re(r.logout())}),l(21,"\u062E\u0631\u0648\u062C"),s()()()()()}if(n&2){let e=N();u(9),y("routerLinkActiveOptions",Vi(6,Vs)),u(2),y("ngIf",e.currentUser.role===e.UserRole.ADMIN),u(),y("ngIf",e.currentUser.role===e.UserRole.ADMIN),u(),y("ngIf",e.currentUser.role===e.UserRole.ADMIN),u(6),ln("",e.currentUser.username," (",e.getArabicRole(e.currentUser.role),")")}}var Nn=class n{constructor(t,e){this.userService=t;this.router=e;this.userService.currentUser$.subscribe(i=>this.currentUser=i)}currentUser=null;UserRole=rt;logout(){this.userService.logout(),this.router.navigate(["/login"])}getArabicRole(t){return{Admin:"\u0645\u062F\u064A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645","Department Head":"\u0631\u0626\u064A\u0633 \u0642\u0633\u0645","Regular User":"\u0645\u0633\u062A\u062E\u062F\u0645"}[t]||t}static \u0275fac=function(e){return new(e||n)(D(ve),D(_e))};static \u0275cmp=oe({type:n,selectors:[["app-navbar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-dark bg-primary mb-4",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","mb-4"],[1,"container"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["class","nav-item",4,"ngIf"],["routerLink","/reporting","routerLinkActive","active",1,"nav-link"],[1,"d-flex","align-items-center","text-white"],[1,"ms-3"],[1,"btn","btn-outline-light","btn-sm",3,"click"],["routerLink","/users","routerLinkActive","active",1,"nav-link"],["routerLink","/departments","routerLinkActive","active",1,"nav-link"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"]],template:function(e,i){e&1&&G(0,Fs,22,7,"nav",0),e&2&&y("ngIf",i.currentUser)},dependencies:[ce,Oe,be,Me,Ui],encapsulation:2})};var Rn=class n{title="idtts-frontend";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=oe({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(e,i){e&1&&ke(0,"app-navbar")(1,"router-outlet")},dependencies:[Ri,Nn],encapsulation:2})};Fi(Rn,Ar).catch(n=>console.error(n));
